<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="persistence.fingerPrint.PensionFingerPrintDailyMapper">
	<resultMap id="BaseResultMap" type="domain.fingerPrint.PensionFingerPrintDaily">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="Astr_Serial_No" jdbcType="VARCHAR" property="astrSerialNo" />
		<result column="Astr_Device_IP" jdbcType="VARCHAR" property="astrDeviceIp" />
		<result column="An_Device_ID" jdbcType="VARCHAR" property="anDeviceId" />
		<result column="An_SEnroll_Number" jdbcType="VARCHAR" property="anSenrollNumber" />
		<result column="An_Log_Date" jdbcType="TIMESTAMP" property="anLogDate" />
		<result column="Record_Time" jdbcType="TIMESTAMP" property="recordTime" />
		<result column="cleared" jdbcType="INTEGER" property="cleared" />
		<result column="notes" jdbcType="VARCHAR" property="notes" />
		<result column="used" jdbcType="INTEGER" property="used" />
	</resultMap>
	<resultMap id="BaseResultMapExtend" type="domain.fingerPrint.PensionFingerPrintDaily">

		<id column="id" jdbcType="INTEGER" property="id" />
		<result column="Astr_Serial_No" jdbcType="VARCHAR" property="astrSerialNo" />
		<result column="Astr_Device_IP" jdbcType="VARCHAR" property="astrDeviceIp" />
		<result column="An_Device_ID" jdbcType="VARCHAR" property="anDeviceId" />
		<result column="An_SEnroll_Number" jdbcType="VARCHAR" property="anSenrollNumber" />
		<result column="An_Log_Date" jdbcType="TIMESTAMP" property="anLogDate" />
		<result column="Record_Time" jdbcType="TIMESTAMP" property="recordTime" />
		<result column="cleared" jdbcType="INTEGER" property="cleared" />
		<result column="notes" jdbcType="VARCHAR" property="notes" />
		<result column="used" jdbcType="INTEGER" property="used" />

		<result column="Type" property="type" jdbcType="INTEGER" />
		<result column="roomNumber" jdbcType="VARCHAR" property="roomNumber" />
		<result column="peopleName" jdbcType="VARCHAR" property="peopleName" />

	</resultMap>
	<sql id="Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
                </when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
                </when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
                  </foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
                </when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
                </when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
                  </foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		id, Astr_Serial_No, Astr_Device_IP, An_Device_ID, An_SEnroll_Number,
		An_Log_Date,
		Record_Time, cleared, notes, used
	</sql>
	<select id="selectByExample" parameterType="domain.fingerPrint.PensionFingerPrintDailyExample"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		select
		<if test="distinct">
			distinct
    </if>
		<include refid="Base_Column_List" />
		from pension_finger_print_daily
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
    </if>
	</select>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		select
		<include refid="Base_Column_List" />
		from pension_finger_print_daily
		where id = #{id,jdbcType=INTEGER}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		delete from pension_finger_print_daily
		where id =
		#{id,jdbcType=INTEGER}
	</delete>
	<delete id="deleteByExample" parameterType="domain.fingerPrint.PensionFingerPrintDailyExample">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		delete from pension_finger_print_daily
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</delete>
	<insert id="insert" parameterType="domain.fingerPrint.PensionFingerPrintDaily">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		insert into pension_finger_print_daily (id, Astr_Serial_No,
		Astr_Device_IP,
		An_Device_ID, An_SEnroll_Number, An_Log_Date,
		Record_Time, cleared, notes,
		used)
		values (#{id,jdbcType=INTEGER},
		#{astrSerialNo,jdbcType=VARCHAR},
		#{astrDeviceIp,jdbcType=VARCHAR},
		#{anDeviceId,jdbcType=VARCHAR}, #{anSenrollNumber,jdbcType=VARCHAR},
		#{anLogDate,jdbcType=TIMESTAMP},
		#{recordTime,jdbcType=TIMESTAMP},
		#{cleared,jdbcType=INTEGER},
		#{notes,jdbcType=VARCHAR},
		#{used,jdbcType=INTEGER})
	</insert>
	<insert id="insertSelective" parameterType="domain.fingerPrint.PensionFingerPrintDaily">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		insert into pension_finger_print_daily
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
      </if>
			<if test="astrSerialNo != null">
				Astr_Serial_No,
      </if>
			<if test="astrDeviceIp != null">
				Astr_Device_IP,
      </if>
			<if test="anDeviceId != null">
				An_Device_ID,
      </if>
			<if test="anSenrollNumber != null">
				An_SEnroll_Number,
      </if>
			<if test="anLogDate != null">
				An_Log_Date,
      </if>
			<if test="recordTime != null">
				Record_Time,
      </if>
			<if test="cleared != null">
				cleared,
      </if>
			<if test="notes != null">
				notes,
      </if>
			<if test="used != null">
				used,
      </if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
      </if>
			<if test="astrSerialNo != null">
				#{astrSerialNo,jdbcType=VARCHAR},
      </if>
			<if test="astrDeviceIp != null">
				#{astrDeviceIp,jdbcType=VARCHAR},
      </if>
			<if test="anDeviceId != null">
				#{anDeviceId,jdbcType=VARCHAR},
      </if>
			<if test="anSenrollNumber != null">
				#{anSenrollNumber,jdbcType=VARCHAR},
      </if>
			<if test="anLogDate != null">
				#{anLogDate,jdbcType=TIMESTAMP},
      </if>
			<if test="recordTime != null">
				#{recordTime,jdbcType=TIMESTAMP},
      </if>
			<if test="cleared != null">
				#{cleared,jdbcType=INTEGER},
      </if>
			<if test="notes != null">
				#{notes,jdbcType=VARCHAR},
      </if>
			<if test="used != null">
				#{used,jdbcType=INTEGER},
      </if>
		</trim>
	</insert>
	<select id="countByExample" parameterType="domain.fingerPrint.PensionFingerPrintDailyExample"
		resultType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		select count(*) from pension_finger_print_daily
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
	<update id="updateByExampleSelective" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		update pension_finger_print_daily
		<set>
			<if test="record.id != null">
				id = #{record.id,jdbcType=INTEGER},
      </if>
			<if test="record.astrSerialNo != null">
				Astr_Serial_No = #{record.astrSerialNo,jdbcType=VARCHAR},
			</if>
			<if test="record.astrDeviceIp != null">
				Astr_Device_IP = #{record.astrDeviceIp,jdbcType=VARCHAR},
			</if>
			<if test="record.anDeviceId != null">
				An_Device_ID = #{record.anDeviceId,jdbcType=VARCHAR},
			</if>
			<if test="record.anSenrollNumber != null">
				An_SEnroll_Number =
				#{record.anSenrollNumber,jdbcType=VARCHAR},
      </if>
			<if test="record.anLogDate != null">
				An_Log_Date = #{record.anLogDate,jdbcType=TIMESTAMP},
			</if>
			<if test="record.recordTime != null">
				Record_Time = #{record.recordTime,jdbcType=TIMESTAMP},
			</if>
			<if test="record.cleared != null">
				cleared = #{record.cleared,jdbcType=INTEGER},
      </if>
			<if test="record.notes != null">
				notes = #{record.notes,jdbcType=VARCHAR},
      </if>
			<if test="record.used != null">
				used = #{record.used,jdbcType=INTEGER},
      </if>
		</set>
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByExample" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		update pension_finger_print_daily
		set id =
		#{record.id,jdbcType=INTEGER},
		Astr_Serial_No =
		#{record.astrSerialNo,jdbcType=VARCHAR},
		Astr_Device_IP =
		#{record.astrDeviceIp,jdbcType=VARCHAR},
		An_Device_ID =
		#{record.anDeviceId,jdbcType=VARCHAR},
		An_SEnroll_Number =
		#{record.anSenrollNumber,jdbcType=VARCHAR},
		An_Log_Date =
		#{record.anLogDate,jdbcType=TIMESTAMP},
		Record_Time =
		#{record.recordTime,jdbcType=TIMESTAMP},
		cleared =
		#{record.cleared,jdbcType=INTEGER},
		notes =
		#{record.notes,jdbcType=VARCHAR},
		used =
		#{record.used,jdbcType=INTEGER}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByPrimaryKeySelective" parameterType="domain.fingerPrint.PensionFingerPrintDaily">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		update pension_finger_print_daily
		<set>
			<if test="astrSerialNo != null">
				Astr_Serial_No = #{astrSerialNo,jdbcType=VARCHAR},
      </if>
			<if test="astrDeviceIp != null">
				Astr_Device_IP = #{astrDeviceIp,jdbcType=VARCHAR},
      </if>
			<if test="anDeviceId != null">
				An_Device_ID = #{anDeviceId,jdbcType=VARCHAR},
      </if>
			<if test="anSenrollNumber != null">
				An_SEnroll_Number = #{anSenrollNumber,jdbcType=VARCHAR},
			</if>
			<if test="anLogDate != null">
				An_Log_Date = #{anLogDate,jdbcType=TIMESTAMP},
      </if>
			<if test="recordTime != null">
				Record_Time = #{recordTime,jdbcType=TIMESTAMP},
      </if>
			<if test="cleared != null">
				cleared = #{cleared,jdbcType=INTEGER},
      </if>
			<if test="notes != null">
				notes = #{notes,jdbcType=VARCHAR},
      </if>
			<if test="used != null">
				used = #{used,jdbcType=INTEGER},
      </if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="domain.fingerPrint.PensionFingerPrintDaily">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Fri Sep 27 
			11:28:39 CST 2013. -->
		update pension_finger_print_daily
		set Astr_Serial_No =
		#{astrSerialNo,jdbcType=VARCHAR},
		Astr_Device_IP =
		#{astrDeviceIp,jdbcType=VARCHAR},
		An_Device_ID =
		#{anDeviceId,jdbcType=VARCHAR},
		An_SEnroll_Number =
		#{anSenrollNumber,jdbcType=VARCHAR},
		An_Log_Date =
		#{anLogDate,jdbcType=TIMESTAMP},
		Record_Time =
		#{recordTime,jdbcType=TIMESTAMP},
		cleared =
		#{cleared,jdbcType=INTEGER},
		notes = #{notes,jdbcType=VARCHAR},
		used =
		#{used,jdbcType=INTEGER}
		where id = #{id,jdbcType=INTEGER}
	</update>
	<select id="selectPrintRecords" parameterType="java.util.Map"
		resultType="domain.fingerPrint.PensionFingerPrintDaily">

		select pfpd.An_Log_Date as anLogDate,
		pfpd.id as id,
		pfpd.used as used
		from pension_finger_print_daily pfpd
		join pension_fingerprint_reg pfr
		on pfpd.An_SEnroll_Number = pfr.An_SEnroll_Number
		join
		pension_fingerprint pfp
		on pfpd.Astr_Serial_No = pfp.Astr_Serial_No
		and
		pfpd.An_Device_ID =
		pfpd.An_Device_ID
		where pfr.Type =
		#{typeId,jdbcType=INTEGER}
		and pfr.People_id =
		#{peopleId,jdbcType=INTEGER}
		<if test="typeId != 2">
			and pfp.Room_id = #{roomId,jdbcType=INTEGER}
	    </if>
		<if test="usedFlag != 0">
			and pfpd.used = #{usedFlag,jdbcType=INTEGER}
	 	</if>
		<if test="startDate != null &amp;&amp; startDate != ''">
			and pfpd.An_Log_Date &gt;= #{startDate,jdbcType=TIMESTAMP}
		</if>
		<if test="endDate != null &amp;&amp; endDate != ''">
			and pfpd.An_Log_Date &lt; #{endDate,jdbcType=TIMESTAMP}
		</if>
	</select>
	<select id="selectByEmployee" parameterType="java.util.Map"
		resultMap="BaseResultMapExtend">
		select d.*,m.name as roomNumber,e.name as peopleName ,r.Type from
		pension_finger_print_daily d
		left join pension_fingerprint_reg r on
		d.An_SEnroll_Number =
		r.An_SEnroll_Number
		left join pension_fingerprint
		p on d.Astr_Serial_No = p.Astr_Serial_No
		left join pension_room m on
		m.id = p.Room_id
		left join pension_employee e on e.id = r.People_id
		where r.Type = 1
		<if test="roomNumber != null &amp;&amp; roomNumber != ''">
			and m.name = #{roomNumber,jdbcType=VARCHAR}
     </if>
		<if test="peopleName != null &amp;&amp; peopleName != ''">
			and e.name = #{peopleName,jdbcType=VARCHAR}
     </if>
		<if test="startTime != null &amp;&amp; startTime != ''">
			and d.An_Log_Date &gt;= #{startTime,jdbcType=TIMESTAMP}
		</if>
		<if test="endTime != null &amp;&amp; endTime != ''">
			and d.An_Log_Date &lt; #{endTime,jdbcType=TIMESTAMP}
	</if>
		order by d.Record_Time desc
	</select>
	<select id="selectByOlder" parameterType="java.util.Map"
		resultMap="BaseResultMapExtend">
		select d.*,m.name as roomNumber,e.name as peopleName ,r.Type from
		pension_finger_print_daily d
		left join pension_fingerprint_reg r on
		d.An_SEnroll_Number =
		r.An_SEnroll_Number
		left join pension_fingerprint
		p on d.Astr_Serial_No = p.Astr_Serial_No
		left join pension_room m on
		m.id = p.Room_id
		left join pension_older e on e.id = r.People_id
		where
		r.Type = 2
		<if test="roomNumber != null &amp;&amp; roomNumber != ''">
			and m.name = #{roomNumber,jdbcType=VARCHAR}
     </if>
		<if test="peopleName != null &amp;&amp; peopleName != ''">
			and e.name = #{peopleName,jdbcType=VARCHAR}
     </if>
		<if test="startTime != null &amp;&amp; startTime != ''">
			and d.An_Log_Date &gt;= #{startTime,jdbcType=TIMESTAMP}
		</if>
		<if test="endTime != null &amp;&amp; endTime != ''">
			and d.An_Log_Date &lt; #{endTime,jdbcType=TIMESTAMP}
	</if>
		order by d.Record_Time desc
	</select>

	<select id="selectDailyPrints" resultMap="BaseResultMap">
		select distinct
		pd.Astr_Serial_No astrSerialNo,
		pd.Astr_Device_IP as astrDeviceIp,
		pd.Record_Time as recordTime,
		pd.An_Device_ID as anDeviceId
		from
		pension_finger_print_daily pd
		where
		pd.cleared=2
		order
		by pd.Astr_Serial_No, pd.Record_Time desc
	</select>
</mapper>