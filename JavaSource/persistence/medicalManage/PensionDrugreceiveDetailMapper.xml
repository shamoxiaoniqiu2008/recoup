<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="persistence.medicalManage.PensionDrugreceiveDetailMapper">
  <resultMap id="BaseResultMap" type="domain.medicalManage.PensionDrugreceiveDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="record_id" jdbcType="INTEGER" property="recordId" />
    <result column="drugreceive_id" jdbcType="INTEGER" property="drugreceiveId" />
    <result column="total_amount" jdbcType="INTEGER" property="totalAmount" />
    <result column="single_dose" jdbcType="INTEGER" property="singleDose" />
    <result column="unit" jdbcType="VARCHAR" property="unit" />
    <result column="morning_flag" jdbcType="INTEGER" property="morningFlag" />
    <result column="noon_flag" jdbcType="INTEGER" property="noonFlag" />
    <result column="night_flag" jdbcType="INTEGER" property="nightFlag" />
    <result column="before_after_flag" jdbcType="INTEGER" property="beforeAfterFlag" />
    <result column="store_time" jdbcType="TIMESTAMP" property="storeTime" />
    <result column="use_flag" jdbcType="INTEGER" property="useFlag" />
    <result column="valid_flag" jdbcType="INTEGER" property="validFlag" />
    <result column="shelflife_time" jdbcType="TIMESTAMP" property="shelflifeTime" />
    <result column="cleared" jdbcType="INTEGER" property="cleared" />
    <result column="note" jdbcType="VARCHAR" property="note" />
    <result column="amount_total" jdbcType="INTEGER" property="amountTotal" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    id, record_id, drugreceive_id, total_amount, single_dose, unit, morning_flag, noon_flag, 
    night_flag, before_after_flag, store_time, use_flag, valid_flag, shelflife_time, 
    cleared, note, amount_total
  </sql>
  <select id="selectByExample" parameterType="domain.medicalManage.PensionDrugreceiveDetailExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from pension_drugreceive_detail
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    select 
    <include refid="Base_Column_List" />
    from pension_drugreceive_detail
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    delete from pension_drugreceive_detail
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <delete id="deleteByExample" parameterType="domain.medicalManage.PensionDrugreceiveDetailExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    delete from pension_drugreceive_detail
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="domain.medicalManage.PensionDrugreceiveDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    insert into pension_drugreceive_detail (id, record_id, drugreceive_id, 
      total_amount, single_dose, unit, 
      morning_flag, noon_flag, night_flag, 
      before_after_flag, store_time, use_flag, 
      valid_flag, shelflife_time, cleared, 
      note, amount_total)
    values (#{id,jdbcType=INTEGER}, #{recordId,jdbcType=INTEGER}, #{drugreceiveId,jdbcType=INTEGER}, 
      #{totalAmount,jdbcType=INTEGER}, #{singleDose,jdbcType=INTEGER}, #{unit,jdbcType=VARCHAR}, 
      #{morningFlag,jdbcType=INTEGER}, #{noonFlag,jdbcType=INTEGER}, #{nightFlag,jdbcType=INTEGER}, 
      #{beforeAfterFlag,jdbcType=INTEGER}, #{storeTime,jdbcType=TIMESTAMP}, #{useFlag,jdbcType=INTEGER}, 
      #{validFlag,jdbcType=INTEGER}, #{shelflifeTime,jdbcType=TIMESTAMP}, #{cleared,jdbcType=INTEGER}, 
      #{note,jdbcType=VARCHAR}, #{amountTotal,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" keyProperty="id" parameterType="domain.medicalManage.PensionDrugreceiveDetail" useGeneratedKeys="true">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    insert into pension_drugreceive_detail
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="recordId != null">
        record_id,
      </if>
      <if test="drugreceiveId != null">
        drugreceive_id,
      </if>
      <if test="totalAmount != null">
        total_amount,
      </if>
      <if test="singleDose != null">
        single_dose,
      </if>
      <if test="unit != null">
        unit,
      </if>
      <if test="morningFlag != null">
        morning_flag,
      </if>
      <if test="noonFlag != null">
        noon_flag,
      </if>
      <if test="nightFlag != null">
        night_flag,
      </if>
      <if test="beforeAfterFlag != null">
        before_after_flag,
      </if>
      <if test="storeTime != null">
        store_time,
      </if>
      <if test="useFlag != null">
        use_flag,
      </if>
      <if test="validFlag != null">
        valid_flag,
      </if>
      <if test="shelflifeTime != null">
        shelflife_time,
      </if>
      <if test="cleared != null">
        cleared,
      </if>
      <if test="note != null">
        note,
      </if>
      <if test="amountTotal != null">
        amount_total,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="recordId != null">
        #{recordId,jdbcType=INTEGER},
      </if>
      <if test="drugreceiveId != null">
        #{drugreceiveId,jdbcType=INTEGER},
      </if>
      <if test="totalAmount != null">
        #{totalAmount,jdbcType=INTEGER},
      </if>
      <if test="singleDose != null">
        #{singleDose,jdbcType=INTEGER},
      </if>
      <if test="unit != null">
        #{unit,jdbcType=VARCHAR},
      </if>
      <if test="morningFlag != null">
        #{morningFlag,jdbcType=INTEGER},
      </if>
      <if test="noonFlag != null">
        #{noonFlag,jdbcType=INTEGER},
      </if>
      <if test="nightFlag != null">
        #{nightFlag,jdbcType=INTEGER},
      </if>
      <if test="beforeAfterFlag != null">
        #{beforeAfterFlag,jdbcType=INTEGER},
      </if>
      <if test="storeTime != null">
        #{storeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="useFlag != null">
        #{useFlag,jdbcType=INTEGER},
      </if>
      <if test="validFlag != null">
        #{validFlag,jdbcType=INTEGER},
      </if>
      <if test="shelflifeTime != null">
        #{shelflifeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cleared != null">
        #{cleared,jdbcType=INTEGER},
      </if>
      <if test="note != null">
        #{note,jdbcType=VARCHAR},
      </if>
      <if test="amountTotal != null">
        #{amountTotal,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="domain.medicalManage.PensionDrugreceiveDetailExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    select count(*) from pension_drugreceive_detail
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    update pension_drugreceive_detail
    <set>
      <if test="record.id != null">
        id = #{record.id,jdbcType=INTEGER},
      </if>
      <if test="record.recordId != null">
        record_id = #{record.recordId,jdbcType=INTEGER},
      </if>
      <if test="record.drugreceiveId != null">
        drugreceive_id = #{record.drugreceiveId,jdbcType=INTEGER},
      </if>
      <if test="record.totalAmount != null">
        total_amount = #{record.totalAmount,jdbcType=INTEGER},
      </if>
      <if test="record.singleDose != null">
        single_dose = #{record.singleDose,jdbcType=INTEGER},
      </if>
      <if test="record.unit != null">
        unit = #{record.unit,jdbcType=VARCHAR},
      </if>
      <if test="record.morningFlag != null">
        morning_flag = #{record.morningFlag,jdbcType=INTEGER},
      </if>
      <if test="record.noonFlag != null">
        noon_flag = #{record.noonFlag,jdbcType=INTEGER},
      </if>
      <if test="record.nightFlag != null">
        night_flag = #{record.nightFlag,jdbcType=INTEGER},
      </if>
      <if test="record.beforeAfterFlag != null">
        before_after_flag = #{record.beforeAfterFlag,jdbcType=INTEGER},
      </if>
      <if test="record.storeTime != null">
        store_time = #{record.storeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.useFlag != null">
        use_flag = #{record.useFlag,jdbcType=INTEGER},
      </if>
      <if test="record.validFlag != null">
        valid_flag = #{record.validFlag,jdbcType=INTEGER},
      </if>
      <if test="record.shelflifeTime != null">
        shelflife_time = #{record.shelflifeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.cleared != null">
        cleared = #{record.cleared,jdbcType=INTEGER},
      </if>
      <if test="record.note != null">
        note = #{record.note,jdbcType=VARCHAR},
      </if>
      <if test="record.amountTotal != null">
        amount_total = #{record.amountTotal,jdbcType=INTEGER},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    update pension_drugreceive_detail
    set id = #{record.id,jdbcType=INTEGER},
      record_id = #{record.recordId,jdbcType=INTEGER},
      drugreceive_id = #{record.drugreceiveId,jdbcType=INTEGER},
      total_amount = #{record.totalAmount,jdbcType=INTEGER},
      single_dose = #{record.singleDose,jdbcType=INTEGER},
      unit = #{record.unit,jdbcType=VARCHAR},
      morning_flag = #{record.morningFlag,jdbcType=INTEGER},
      noon_flag = #{record.noonFlag,jdbcType=INTEGER},
      night_flag = #{record.nightFlag,jdbcType=INTEGER},
      before_after_flag = #{record.beforeAfterFlag,jdbcType=INTEGER},
      store_time = #{record.storeTime,jdbcType=TIMESTAMP},
      use_flag = #{record.useFlag,jdbcType=INTEGER},
      valid_flag = #{record.validFlag,jdbcType=INTEGER},
      shelflife_time = #{record.shelflifeTime,jdbcType=TIMESTAMP},
      cleared = #{record.cleared,jdbcType=INTEGER},
      note = #{record.note,jdbcType=VARCHAR},
      amount_total = #{record.amountTotal,jdbcType=INTEGER}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="domain.medicalManage.PensionDrugreceiveDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    update pension_drugreceive_detail
    <set>
      <if test="recordId != null">
        record_id = #{recordId,jdbcType=INTEGER},
      </if>
      <if test="drugreceiveId != null">
        drugreceive_id = #{drugreceiveId,jdbcType=INTEGER},
      </if>
      <if test="totalAmount != null">
        total_amount = #{totalAmount,jdbcType=INTEGER},
      </if>
      <if test="singleDose != null">
        single_dose = #{singleDose,jdbcType=INTEGER},
      </if>
      <if test="unit != null">
        unit = #{unit,jdbcType=VARCHAR},
      </if>
      <if test="morningFlag != null">
        morning_flag = #{morningFlag,jdbcType=INTEGER},
      </if>
      <if test="noonFlag != null">
        noon_flag = #{noonFlag,jdbcType=INTEGER},
      </if>
      <if test="nightFlag != null">
        night_flag = #{nightFlag,jdbcType=INTEGER},
      </if>
      <if test="beforeAfterFlag != null">
        before_after_flag = #{beforeAfterFlag,jdbcType=INTEGER},
      </if>
      <if test="storeTime != null">
        store_time = #{storeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="useFlag != null">
        use_flag = #{useFlag,jdbcType=INTEGER},
      </if>
      <if test="validFlag != null">
        valid_flag = #{validFlag,jdbcType=INTEGER},
      </if>
      <if test="shelflifeTime != null">
        shelflife_time = #{shelflifeTime,jdbcType=TIMESTAMP},
      </if>
      <if test="cleared != null">
        cleared = #{cleared,jdbcType=INTEGER},
      </if>
      <if test="note != null">
        note = #{note,jdbcType=VARCHAR},
      </if>
      <if test="amountTotal != null">
        amount_total = #{amountTotal,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="domain.medicalManage.PensionDrugreceiveDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 15 16:04:57 CST 2014.
    -->
    update pension_drugreceive_detail
    set record_id = #{recordId,jdbcType=INTEGER},
      drugreceive_id = #{drugreceiveId,jdbcType=INTEGER},
      total_amount = #{totalAmount,jdbcType=INTEGER},
      single_dose = #{singleDose,jdbcType=INTEGER},
      unit = #{unit,jdbcType=VARCHAR},
      morning_flag = #{morningFlag,jdbcType=INTEGER},
      noon_flag = #{noonFlag,jdbcType=INTEGER},
      night_flag = #{nightFlag,jdbcType=INTEGER},
      before_after_flag = #{beforeAfterFlag,jdbcType=INTEGER},
      store_time = #{storeTime,jdbcType=TIMESTAMP},
      use_flag = #{useFlag,jdbcType=INTEGER},
      valid_flag = #{validFlag,jdbcType=INTEGER},
      shelflife_time = #{shelflifeTime,jdbcType=TIMESTAMP},
      cleared = #{cleared,jdbcType=INTEGER},
      note = #{note,jdbcType=VARCHAR},
      amount_total = #{amountTotal,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>
	<select id="selectDrugDetails" parameterType="java.lang.Long" resultType="service.olderManage.DrugReceiveDetailDomain">
		select pdd.id,
		pr.id as drugreceiveId,
		pr.drugreceive_name as
		drugreceiveName,
		pdd.total_amount as totalAMount,
		pdd.single_dose as
		singleDose,
		pdd.unit as unit,
		pdd.morning_flag as morningFlag,
		pdd.noon_flag as noonFlag,
		pdd.night_flag as nightFlag,
		pdd.before_after_flag as beforeAfterFlag,
		pdd.use_flag as useFlag,
		pdd.valid_flag as validFlag,
		if(pdd.morning_flag=1,true,false) as
		morningF,
		if(pdd.noon_flag=1,true,false) as noonF,
		if(pdd.night_flag=1,true,false) as nightF,
		if(pdd.before_after_flag=1,true,false) as eatTimeF,
		if(pdd.use_flag=1,true,false) as inUseF,
		if(pdd.valid_flag=1,true,false) as validF,
		pdd.shelflife_time as
		shelflifeTime,
		pdd.cleared
		from pension_drugreceive_detail pdd,
		pension_dic_drugreceive pr
		where pr.id=pdd.drugreceive_id and
		pdd.record_id=#{recordId,jdbcType=INTEGER}

	</select>

	<select id="selecDrugDetailList" parameterType="map" resultType="service.olderManage.DrugReceiveDetailDomain">
		select pdd.id,
		pr.id as drugreceiveId,
		pr.drugreceive_name as
		drugreceiveName,
		pdd.total_amount as totalAMount,
		pdd.single_dose as
		singleDose,
		pdd.unit
		as unit,
		pdd.morning_flag as morningFlag,
		pdd.noon_flag as noonFlag,
		pdd.night_flag as nightFlag,
		pdd.before_after_flag as beforeAfterFlag,
		pdd.use_flag as useFlag,
		pdd.valid_flag as validFlag,
		pdd.shelflife_time as
		shelflifeTime,
		pdd.cleared
		from
		pension_drugreceive_detail pdd,
		pension_dic_drugreceive pr,
		pension_drugreceive_record pdr
		where pr.id=pdd.drugreceive_id and
		pdd.record_id=pdr.id
		and pdr.audit_result=1
		and
		pdd.valid_flag=1
		and pdd.cleared=2 and
		pr.id=#{drugId,jdbcType=INTEGER}
		and pdd.shelflife_time &gt;= #{eatTime,jdbcType=TIMESTAMP}
		and pdd.use_flag=#{useFlag}
	</select>
</mapper>