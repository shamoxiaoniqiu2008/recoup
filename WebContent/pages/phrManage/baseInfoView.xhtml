<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:his="http://centling.his.net/histag" style="width:100%">

<!-- 回车键，往下！引入的js文件 -->
<f:view contentType="text/html" style="width:100%">
	<h:head>
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/default.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/skin.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/layout.css"></link>
		<link href="#{request.contextPath}/css/css.css" rel="stylesheet"
			type="text/css" />
		<link rel="stylesheet" href="#{request.contextPath}/css/style.css">
		</link>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		</meta>
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/ime.js?ver=#{projectConfig.ver}" />
	<script type="text/javascript" src="#{request.contextPath}/resources/js/calendar.js?ver=#{projectConfig.ver}" />
	</h:head>
	<h:body>
	<p:growl id="msg"></p:growl>
	<table>
	<tr>
	<td valign="top" style="width:205px">
	<h:form id="baseSearchForm" style="height:500px; float: left; overflow: auto;">
		<h:outputText value="姓名:"></h:outputText>
		<p:inputText style="width:80px"
			id="olderNameInputRight" value="#{baseInfoController.olderName}">
			</p:inputText>
		<his:IME for="baseSearchForm:olderNameInputRight"
				fitcol="olderId,inputCode" resultcol="1" lock="false" rawSQL="true"
				SQL="#{baseInfoController.nameToSql}"
				SQLResult="编号:0,姓名:1,输入码:2,性别:3"
				multiresult="baseSearchForm:olderNameInputRightHidden;0,baseSearchForm:olderNameInputRight;1" />
			<h:inputHidden id="olderNameInputRightHidden"
				value="#{baseInfoController.olderId}"></h:inputHidden>
		<p:commandButton styleClass="searchbtn" value="" 
			action="#{baseInfoController.createTree}" update=":msg,:baseSearchForm"></p:commandButton>
		<p:tree id="sectiontree" value="#{baseInfoController.root}"
			style="width:200px"
			var="node" rowKey="#{node.id}" selectionMode="single" animate="true" 
			selection="#{baseInfoController.selectedNode}"  >
				<p:ajax event="select" 
				listener="#{baseInfoController.onNodeSelect}" 
				update=":baseInfoForm,:msg"/>
				<p:treeNode>
					<h:outputText value="#{node}" />
				</p:treeNode>
			</p:tree>
	</h:form>
	
	</td>
	<td valign="top" style="width:1000px">
	<div style="margin-top:-5px">
	<h:form id="baseInfoForm">
	<h:outputText value="健康档案种类:"></h:outputText>
		<p:inputText disabled="#{!baseInfoController.createFlag}"
			id="fileTypeName" value="#{baseInfoController.fileTypeName}">
			</p:inputText>
		<his:IME for="baseInfoForm:fileTypeName" 
				fitcol="inputcode" resultcol="1" lock="false" rawSQL="true"
				SQL="#{baseInfoController.fileSql}"
				SQLResult="编号:0,名称:1,输入码:2:hide"
				multiresult="baseInfoForm:fileTypeId;0,baseInfoForm:fileTypeName;1" />
			<h:inputHidden id="fileTypeId"
				value="#{baseInfoController.fileTypeId}"></h:inputHidden>
		<p:commandButton styleClass="commonbtn" value="创建" 
			disabled="#{!baseInfoController.createFlag}"
			action="#{baseInfoController.createFile}" 
			update=":msg,:baseInfoForm"></p:commandButton>
		<p:commandButton styleClass="commonbtn" value="编辑" 
			disabled="#{!baseInfoController.editFlag}"
			action="#{baseInfoController.editFile}" 
			update=":msg,:baseInfoForm"></p:commandButton> 
		<p:commandButton styleClass="commonbtn" value="保存"
			ajax="true" process="@this,paymentList,sensitivesList,olderAnamnesisList,olderOtherAnamnesisOperateList,olderOtherAnamnesisTraumaList,olderOtherAnamnesisTransfusionList,olderFamilyIllFatherList,olderFamilyIllMotherList,olderFamilyIllBrothersAndSistersList,olderFamilyIllChildrenList,olderDeformityList"
			disabled="#{!baseInfoController.saveFlag}"
			action="#{baseInfoController.saveFile}" 
			update=":msg,:baseInfoForm"></p:commandButton>
		<p:commandButton styleClass="commonbtn" value="取消" 
			disabled="#{!baseInfoController.cancelFlag}"
			action="#{baseInfoController.cancelFile}" 
			update=":msg,:baseInfoForm"></p:commandButton>
			<table class="hengbiaoge" style="table-layout:fixed ;" align="left">
			<tr>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="姓名:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" width="100">
					<h:outputText value="#{baseInfoController.hrExtend.pensionOlder.name}"></h:outputText></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;" ><h:outputLabel value="性别:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.sexDomainList}">
						<f:selectItem itemLabel="1-男" itemValue="1" />
						<f:selectItem itemLabel="2-女" itemValue="2" />
						<f:selectItem itemLabel="9-未知" itemValue="9" />
					</h:selectManyCheckbox></td>
				
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;">
					<h:outputLabel value="出生日期:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" width="100">
					<h:outputText value="#{baseInfoController.hrExtend.pensionOlder.birthday}">
						<f:convertDateTime pattern="yyyy-MM-dd" />
					</h:outputText></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;">
					<h:outputLabel value="身份证号:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" width="200">
					<h:outputText value="#{baseInfoController.hrExtend.pensionOlder.idcardnum}"></h:outputText></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;">
					<h:outputLabel value="常住类型:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" width="60">
					<h:outputText value=""></h:outputText></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;">
					<h:outputLabel value="联系人:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" width="80">
					<h:outputText value="#{baseInfoController.hrExtend.contectName}"></h:outputText></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;"><h:outputLabel value="联系人电话:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" width="120"><h:outputText value="#{baseInfoController.hrExtend.contectNum}"></h:outputText></td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="血型:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="7"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.bloodList}">
					<f:selectItems value="#{baseInfoController.hrExtend.pensionDicBloodtypeList}"
					var="bloodTypeList" itemLabel="#{bloodTypeList.id}-#{bloodTypeList.bloodtypeName}" itemValue="#{bloodTypeList.id}"></f:selectItems>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;"><h:outputLabel value="RH阴性:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="3"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.rhList}">
					<f:selectItem itemLabel="是" itemValue="1"></f:selectItem>
					<f:selectItem itemLabel="否" itemValue="2"></f:selectItem>
					<f:selectItem itemLabel="未知" itemValue="9"></f:selectItem>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;"><h:outputLabel value="本人成分:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" >
					<h:outputText value="#{baseInfoController.hrExtend.pensionOlder.jobs}"></h:outputText></td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="民族:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.nationList}">
					<f:selectItems value="#{baseInfoController.hrExtend.pensionDicNationList}"
					var="nationList" itemLabel="#{nationList.id}-#{nationList.type}" itemValue="#{nationList.id}"></f:selectItems>
				</h:selectManyCheckbox></td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="文化程度:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.degreeList}">
					<f:selectItems value="#{baseInfoController.hrExtend.pensionDicDegreeList}"
					var="degreeList" itemLabel="#{degreeList.id}-#{degreeList.degreeName}" itemValue="#{degreeList.id}"></f:selectItems>
				</h:selectManyCheckbox></td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="婚姻状况:"></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.marriageList}">
					<f:selectItems value="#{baseInfoController.hrExtend.pensionDicMarriageList}"
					var="marriageList" itemLabel="#{marriageList.id}-#{marriageList.marriageName}" itemValue="#{marriageList.id}"></f:selectItems>
				</h:selectManyCheckbox></td>
			</tr>
			
		<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="医疗支付方式:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13">
					<h:selectManyCheckbox id="paymentList" 
						value="#{baseInfoController.hrExtend.paymentList}">
						<f:selectItems value="#{baseInfoController.hrExtend.pensionDicPaymentList}"
						var="paymentsList" itemLabel="#{paymentsList.id}-#{paymentsList.paymentName}" itemValue="#{paymentsList.id}" ></f:selectItems>
				</h:selectManyCheckbox></td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="药物过敏史:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="2" style="white-space: nowrap; text-align:left"><h:selectManyCheckbox value="#{baseInfoController.hrExtend.sensitivesFlagList}">
					<f:selectItems value="#{baseInfoController.hrExtend.haveDomainList}" var="haveList" itemLabel="#{haveList.haveId}-#{haveList.haveName}" itemValue="#{haveList.haveId}"></f:selectItems>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1"  colspan="11" style="white-space: normal; text-align:left">
					<h:selectManyCheckbox style="white-space: normal" id="sensitivesList"
						value="#{baseInfoController.hrExtend.sensitivesList}">
					<f:selectItems value="#{baseInfoController.hrExtend.pensionDicAllergyList}"
					var="allergyList" itemLabel="#{allergyList.id}-#{allergyList.allergyName} &nbsp;" itemValue="#{allergyList.id}"></f:selectItems>
				</h:selectManyCheckbox></td>
			</tr>
			<tr >
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" rowspan="4"><h:outputLabel value="既往史:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;" ><h:outputLabel value="疾病:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13">
				<h:selectManyCheckbox style="white-space: nowrap" id="olderAnamnesisList"
					value="#{baseInfoController.hrExtend.olderAnamnesisList}">
						<f:selectItem itemLabel="无" itemValue="0"></f:selectItem>
						<f:selectItems value="#{baseInfoController.hrExtend.pensionDicIllanamnesisList}"
							var="dicIllanamnesis" 
							itemLabel="#{dicIllanamnesis.id}-#{dicIllanamnesis.anamnesisName} &nbsp;#{dicIllanamnesis.definateTime == null?'':'确诊时间：'}#{dicIllanamnesis.definateTime == null?'':dicIllanamnesis.definateTime} &nbsp;" 
							itemValue="#{dicIllanamnesis.id}"></f:selectItems>
				</h:selectManyCheckbox>
				</td>
			</tr>
			<tr>
				<td class="hengbiaogeHeader1" style="word-wrap:break-word;" ><h:outputLabel value="手术:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="2" style="white-space: nowrap; text-align:left">
				<h:selectManyCheckbox value="#{baseInfoController.hrExtend.operateFlagList}">
					<f:selectItems value="#{baseInfoController.hrExtend.haveDomainList}" 
						var="haveList" itemLabel="#{haveList.haveId}-#{haveList.haveName}" itemValue="#{haveList.haveId}"></f:selectItems>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1" colspan="11" style="text-align:left;padding:0px 10px 0px 0px">
				<h:outputText rendered="#{!baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.olderOtherAnamnesisOperateList}"></h:outputText>
				<p:inputText style="width:100%;height:100%;" id="olderOtherAnamnesisOperateList"
					rendered="#{baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.olderOtherAnamnesisOperateList}"></p:inputText>
				</td>
			</tr>
			<tr>
			<td class="hengbiaogeHeader1" style="word-wrap:break-word;" ><h:outputLabel value="外伤:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="2" style="white-space: nowrap; text-align:left">
				<h:selectManyCheckbox value="#{baseInfoController.hrExtend.traumaFlagList}">
					<f:selectItems value="#{baseInfoController.hrExtend.haveDomainList}" 
						var="haveList" itemLabel="#{haveList.haveId}-#{haveList.haveName}" itemValue="#{haveList.haveId}"></f:selectItems>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1" colspan="11" style="text-align:left;padding:0px 10px 0px 0px">
				<h:outputText rendered="#{!baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.olderOtherAnamnesisTraumaList}"></h:outputText>
				<p:inputText style="width:100%;height:100%;" id="olderOtherAnamnesisTraumaList"
					rendered="#{baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.olderOtherAnamnesisTraumaList}"></p:inputText>
				</td>
			</tr>
			<tr>
			<td class="hengbiaogeHeader1" style="word-wrap:break-word;" ><h:outputLabel value="输血:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="2" style="white-space: nowrap; text-align:left">
				<h:selectManyCheckbox value="#{baseInfoController.hrExtend.transfusionFlagList}">
					<f:selectItems value="#{baseInfoController.hrExtend.haveDomainList}" 
						var="haveList" itemLabel="#{haveList.haveId}-#{haveList.haveName}" itemValue="#{haveList.haveId}"></f:selectItems>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1" colspan="11" style="text-align:left;padding:0px 10px 0px 0px">
				<h:outputText rendered="#{!baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.olderOtherAnamnesisTransfusionList}"></h:outputText>
				<p:inputText style="width:100%;height:100%;" id="olderOtherAnamnesisTransfusionList"
					rendered="#{baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.olderOtherAnamnesisTransfusionList}"></p:inputText>
				</td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="家族史:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13">
					<table style="width:100%">
						<tr>
							<td class="hengbiaogeHeader1" style="border-top:none;border-left:none">
							<h:outputLabel value="父亲:" ></h:outputLabel></td>
							<td class="hengbiaogeHeader1" style="width:500px;border-top:none;text-align:left;padding:0px 10px 0px 0px" >
							<h:outputText rendered="#{!baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllFatherList}"></h:outputText>
							<p:inputText style="width:100%;height:100%;" id="olderFamilyIllFatherList"
								rendered="#{baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllFatherList}"></p:inputText>
							</td>
							<td class="hengbiaogeHeader1" style="border-top:none;border-left:none">
							<h:outputLabel value="母亲:" ></h:outputLabel></td>
							<td class="hengbiaogeHeader1" style="width:500px;border-top:none;text-align:left;padding:0px 5px 0px 0px" >
							<h:outputText rendered="#{!baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllMotherList}"></h:outputText>
							<p:inputText style="width:100%;height:100%;" id="olderFamilyIllMotherList"
								rendered="#{baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllMotherList}"></p:inputText>
							</td>
							</tr>
							<tr>
							<td class="hengbiaogeHeader1" style="border-top:none;border-left:none">
							<h:outputLabel value="兄弟姐妹:" ></h:outputLabel></td>
							<td class="hengbiaogeHeader1" style="width:500px;border-top:none;text-align:left;padding:0px 10px 0px 0px" >
							<h:outputText rendered="#{!baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllBrothersAndSistersList}"></h:outputText>
							<p:inputText style="width:100%;height:100%;" id="olderFamilyIllBrothersAndSistersList"
								rendered="#{baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllBrothersAndSistersList}"></p:inputText>
							</td>
							<td class="hengbiaogeHeader1" style="border-top:none;border-left:none">
							<h:outputLabel value="子女:" ></h:outputLabel></td>
							<td class="hengbiaogeHeader1" style="width:500px;border-top:none;text-align:left;padding:0px 5px 0px 0px" >
							<h:outputText rendered="#{!baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllChildrenList}"></h:outputText>
							<p:inputText style="width:100%;height:100%;" id="olderFamilyIllChildrenList"
								rendered="#{baseInfoController.saveFlag}" 
								value="#{baseInfoController.hrExtend.olderFamilyIllChildrenList}"></p:inputText>
							</td>
							</tr>
						<tr>
							<td colspan="4" class="hengbiaogeHeader1" style="text-align:left;border-left:none;border-bottom:none;border-right:none">
							<ui:repeat var="dicIllanamnesis" value="#{baseInfoController.hrExtend.pensionDicIllanamnesisList}">
								<h:outputText value="#{dicIllanamnesis.id}-#{dicIllanamnesis.anamnesisName}&nbsp;"></h:outputText>
							</ui:repeat>
							</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="遗传病史:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="2" style="white-space: nowrap; text-align:left">
				<h:selectManyCheckbox value="#{baseInfoController.hrExtend.geneticFlagList}">
					<f:selectItems value="#{baseInfoController.hrExtend.haveDomainList}" 
						var="haveList" itemLabel="#{haveList.haveId}-#{haveList.haveName}" itemValue="#{haveList.haveId}"></f:selectItems>
				</h:selectManyCheckbox></td>
				<td class="hengbiaogeHeader1" colspan="11" style="text-align:left;padding:0px 10px 0px 0px">
				<h:outputText rendered="#{!baseInfoController.saveFlag}" 
					value="#{baseInfoController.hrExtend.pensionOlder.geneticDisease}"></h:outputText>
				</td>
			</tr>
			<tr>
					<td class="hengbiaogeHeader1" style="word-wrap:break-word;" colspan="2" ><h:outputLabel value="残疾情况:" ></h:outputLabel>
				</td>
				<td class="hengbiaogeHeader1" colspan="13">
				<h:selectManyCheckbox id="olderDeformityList"
					value="#{baseInfoController.hrExtend.olderDeformityList}">
						<f:selectItems value="#{baseInfoController.hrExtend.pensionDicDeformityList}"
							var="dicDeformity" itemLabel="#{dicDeformity.id}-#{dicDeformity.deformityName}" 
							itemValue="#{paymentsList.id}" ></f:selectItems>
				</h:selectManyCheckbox></td>
			</tr>
		</table>
		</h:form>
	</div>
	</td>
	</tr>
	</table>
	
	</h:body>
</f:view>
</html>