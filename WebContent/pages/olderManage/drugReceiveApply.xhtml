<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:his="http://centling.his.net/histag"
	xmlns:p="http://primefaces.org/ui">


<f:view contentType="text/html">

	<style>
.B1 {
	color: red
}

.ui-panel .ui-panel-content {
	padding: 0em !important;
}
</style>
	<h:head>
		<title>#{pageConfig.loginTitle}</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/default.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/skin.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/layout.css"></link>
		<link href="#{request.contextPath}/css/css.css" rel="stylesheet"
			type="text/css" />
		<link rel="stylesheet" href="#{request.contextPath}/css/style.css"></link>

		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/ime.js?ver=#{projectConfig.ver}" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/calendar.js?ver=#{projectConfig.ver}" />
		<h:outputScript library="javax.faces" name="jsf.js" target="head" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/common.js?ver=#{projectConfig.ver}" />

	</h:head>

	<h:body>
		<p:growl id="message" widgetVar="message"></p:growl>
		<h:form id="searchForm">
			<table>
				<tr>
					<td class="leftcell">老人姓名:</td>
					<td><p:inputText
							value="#{drugReceiveApplyController.olderName}" id="olderName"
							style="width:80px;" /> <his:IME for="searchForm:olderName"
							rawSQL="true" resultcol="1" SQLResult="编号:0,姓名:1,输入码:2"
							SQL="select pe.id,pe.name,pe.inputCode from pension_older pe where pe.cleared=2 and pe.statuses not  in(1,2)"
							fitcol="inputCode" lock="true" multiresult="searchForm:olderId;0"
							sortcol="id" /> <h:inputHidden
							value="#{drugReceiveApplyController.olderId}" id="olderId" /></td>
					<td class="leftcell">是否审核:</td>
					<td><h:selectOneMenu
							value="#{drugReceiveApplyController.isAudit}" style="width:60px"
							class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker ui-state-hover">
							<f:selectItem itemValue="" itemLabel="全部" />
							<f:selectItem itemValue="1" itemLabel="是" />
							<f:selectItem itemValue="2" itemLabel="否" />
						</h:selectOneMenu></td>
					<td class="leftcell">审核结果:</td>
					<td><h:selectOneMenu
							value="#{drugReceiveApplyController.auditResult}"
							style="width:80px"
							class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker ui-state-hover">
							<f:selectItem itemValue="" itemLabel="全部" />
							<f:selectItem itemValue="1" itemLabel="通过" />
							<f:selectItem itemValue="2" itemLabel="不通过" />
						</h:selectOneMenu></td>
					<td class="leftcell">配送分组:</td>
					<td><h:selectOneMenu
							value="#{drugReceiveApplyController.delivery}" style="width:90px"
							class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker ui-state-hover">
							<f:selectItems value="#{drugReceiveApplyController.deliveryList}"
								var="dic" itemLabel="#{dic.deliveryName}" itemValue="#{dic.id}"></f:selectItems>
						</h:selectOneMenu></td>
					<td class="leftcell"><p:commandButton styleClass="searchbtn"
							value=""
							actionListener="#{drugReceiveApplyController.searchApplications}"
							update=":applicationForm,:message,:detailForm" /></td>
					<td class="leftcell"><p:commandButton styleClass="blankbtn"
							value=""
							actionListener="#{drugReceiveApplyController.clearSearch}"
							update=":searchForm" /></td>

					<td class="leftcell"><p:commandButton value="摆药老人维护"
							oncomplete="dispenseDlg.show()"
							actionListener="#{drugReceiveApplyController.selectOlderList}"
							styleClass="commonbtn"
							update=":dispenseSearchForm,:dispenseForm,:message">
						</p:commandButton></td>
					<td class="leftcell"><p:commandButton value="药物字典维护"
							oncomplete="drugDlg.show()"
							actionListener="#{drugReceiveApplyController.selectDrugList}"
							styleClass="commonbtn"
							update=":drugSearchForm,:drugForm,:message"></p:commandButton></td>
				</tr>
			</table>
		</h:form>
		<h:form id="applicationForm">
			<table width="100%">
				<tr>
					<td><p:dataTable cellspacing="2" rows="7" style="width:100%"
							id="applicationTable"
							selection="#{drugReceiveApplyController.selectedRow}"
							value="#{drugReceiveApplyController.drugApplyList}"
							paginator="true" paginatorPosition="bottom"
							paginatorAlwaysVisible="false"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
							var="apply" rowKey="#{apply.id}" selectionMode="single"
							emptyMessage="没有相应记录">

							<p:ajax event="rowSelect" update=":detailForm"
								listener="#{drugReceiveApplyController.viewDetailList}" />
							<p:ajax event="rowUnselect" update=":detailForm"
								listener="#{drugReceiveApplyController.clearDetailList}" />
							<p:column headerText="老人姓名" styleClass="width60">
								<h:outputText value="#{apply.olderName}" />
							</p:column>
							<p:column headerText="申请人" styleClass="width60">
								<h:outputText value="#{apply.applicantName}" />
							</p:column>
							<p:column headerText="关系" styleClass="width60">
								<h:outputText value="#{apply.relationShip}" />
							</p:column>
							<p:column headerText="联系电话" styleClass="width60">
								<h:outputText value="#{apply.phoneNo}">
								</h:outputText>
							</p:column>
							<p:column headerText="有效" styleClass="width60">
								<h:outputText value="是" rendered="#{apply.validFlag==1}" />
								<h:outputText value="否" rendered="#{apply.validFlag==2}" />
							</p:column>
							<p:column headerText="配送分组" styleClass="width60">
								<h:outputText value="#{apply.deliveryName}" />
							</p:column>
							<p:column headerText="已提交" styleClass="width60">
								<h:outputText value="是" rendered="#{apply.sendFlag==1}" />
								<h:outputText value="否" rendered="#{apply.sendFlag==2}" />
							</p:column>
							<p:column headerText="已审核" styleClass="width60">
								<h:outputText value="是" rendered="#{apply.auditFlag==1}" />
								<h:outputText value="否" rendered="#{apply.auditFlag==2}" />
							</p:column>
							<p:column headerText="审核结果" styleClass="width60">
								<h:outputText value="通过" rendered="#{apply.auditResult==1}" />
								<h:outputText value="不通过" rendered="#{apply.auditResult==2}" />
							</p:column>
						</p:dataTable></td>
				</tr>
			</table>
		</h:form>
		<!-- 申请信息维护 -->
		<h:form id="maintainForm">
			<div align="center">
				<p:commandButton oncomplete="addApplyDialog.show()" id="addButton"
					actionListener="#{drugReceiveApplyController.clearAddForm}"
					styleClass="addbtn" value="" update=":addRecordForm"></p:commandButton>
				<p:commandButton oncomplete="editApplyDialogShow(xhr,status,args)"
					id="editButton"
					actionListener="#{drugReceiveApplyController.showEditForm}"
					update=":editRecordForm,:message" styleClass="modifybtn" value=""></p:commandButton>
				<p:commandButton id="delButton"
					oncomplete="confirmDelDialogShow(xhr,status,args)"
					styleClass="deletebtn" value="" update=":message"
					actionListener="#{drugReceiveApplyController.showDelForm}">
				</p:commandButton>
				<p:commandButton value="提交"
					actionListener="#{drugReceiveApplyController.sentMessage}"
					styleClass="commonbtn" update=":message,:applicationForm"></p:commandButton>
			</div>
		</h:form>
		<h:form id="detailForm">
			<table width="100%">
				<tr>
					<td><p:dataTable cellspacing="2" rows="7" style="width:100%"
							id="viewDrugDetail"
							value="#{drugReceiveApplyController.drugDetailList}"
							paginator="true" paginatorPosition="bottom"
							paginatorAlwaysVisible="false"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
							var="detail" rowKey="#{detail.id}" emptyMessage="没有相应记录">


							<p:column headerText="药物名称" styleClass="width60">
								<h:outputText value="#{detail.drugreceiveName}" />
							</p:column>
							<p:column headerText="总量" styleClass="width50">
								<h:outputText value="#{detail.totalAmount}" />
							</p:column>
							<p:column headerText="单次用量" styleClass="width60">
								<h:outputText value="#{detail.singleDose}" />
							</p:column>
							<p:column headerText="单位" styleClass="width50">
								<h:outputText value="#{detail.unit}" />
							</p:column>
							<p:column headerText="早" styleClass="width50">
								<h:selectBooleanCheckbox value="#{detail.morningF}"
									disabled="true" />
							</p:column>
							<p:column headerText="中" styleClass="width50">
								<h:selectBooleanCheckbox value="#{detail.noonF}" disabled="true" />
							</p:column>
							<p:column headerText="晚" styleClass="width50">
								<h:selectBooleanCheckbox value="#{detail.nightF}"
									disabled="true" />
							</p:column>
							<p:column headerText="饭前" styleClass="width50">
								<h:selectBooleanCheckbox value="#{detail.eatTimeF}"
									disabled="true" />
							</p:column>
							<p:column headerText="在用" styleClass="width50">
								<h:selectBooleanCheckbox value="#{detail.inUseF}"
									disabled="true" />
							</p:column>
							<p:column headerText="有效" styleClass="width50">
								<h:selectBooleanCheckbox value="#{detail.validF}"
									disabled="true" />
							</p:column>
							<p:column headerText="保质期" styleClass="width60">
								<h:outputText value="#{detail.shelflifeTime}">
									<f:convertDateTime pattern="yyyy-MM-dd" />
								</h:outputText>
							</p:column>
						</p:dataTable></td>
				</tr>
			</table>
		</h:form>

		<!-- 删除记录的dialog -->
		<p:dialog appendToBody="true" modal="true" header="删除确认"
			widgetVar="confirmDelDialog">
			<h:form id="confirmDelForm">
				<h:panelGrid>
					<f:facet name="header">
						<h:outputText value="确定删除该药物接收申请？" style="font-weight:bold;" />
					</f:facet>
					<f:facet name="footer">
						<p:commandButton styleClass="submitbtn" value=""
							action="#{drugReceiveApplyController.deleteApplication}"
							update=":applicationForm:applicationTable,:message"
							oncomplete="confirmDelDialog.hide()"></p:commandButton>
						<p:commandButton styleClass="cancelbtn" value="" type="button"
							onclick="confirmDelDialog.hide();"></p:commandButton>
					</f:facet>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- 新增申请信息 -->
		<p:dialog header="新增接收药物" widgetVar="addApplyDialog" resizable="false"
			appendToBody="true" modal="true" position="top">
			<h:form id="addRecordForm" styleClass="noDisable">
				<table class="hengbiaoge" width="950px" align="center">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addOlderName">老人姓名:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="addOlderName"
								value="#{drugReceiveApplyController.addDrugApply.olderName}">
								<p:ajax event="blur"
									listener="#{drugReceiveApplyController.selectOlderDrug}"
									process="@this,addRecordForm:addOlderId"></p:ajax>
							</p:inputText> <his:IME for="addRecordForm:addOlderName" rawSQL="true"
								resultcol="1" SQLResult="编号:0,姓名:1,输入码:2" sortcol="older_id"
								SQL="#{drugReceiveApplyController.addDrugOlderSql}"
								fitcol="inputCode" lock="true"
								multiresult="addRecordForm:addOlderId;0" /> <h:inputHidden
								value="#{drugReceiveApplyController.addDrugApply.olderId}"
								id="addOlderId" /></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:commandLink
								update=":dispenseSearchForm,:dispenseForm,:message"
								oncomplete="dispenseDlg.show()" title="摆药老人维护"
								action="#{drugReceiveApplyController.selectOlderList}">
								<p:graphicImage value="/images/plus_alt.png"
									style="border:0px;width: 20px;height: 20px;" />
							</p:commandLink></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="applicantName">申请人:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="applicantName"
								value="#{drugReceiveApplyController.addDrugApply.applicantName}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="phoneNo">联系电话:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="phoneNo"
								value="#{drugReceiveApplyController.addDrugApply.phoneNo}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="relationShip">关系:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="relationShip"
								value="#{drugReceiveApplyController.addDrugApply.relationShip}">
							</p:inputText> <his:IME for="addRecordForm:relationShip" rawSQL="true"
								resultcol="1" SQLResult="编号:0,关系:1,输入码:2" sortcol="id"
								SQL="select p.id,p.relationShip,p.inputCode from pension_dic_relationship p"
								fitcol="inputCode" lock="true"
								multiresult="addRecordForm:relationshipId;0" /> <h:inputHidden
								value="#{drugReceiveApplyController.addDrugApply.relationshipId}"
								id="relationshipId" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="drugreceiveName">药物名称:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0; width: 120px"><p:inputText
								id="drugreceiveName"
								value="#{drugReceiveApplyController.addDrugApplyDetail.drugreceiveName}">
							</p:inputText> <his:IME for="addRecordForm:drugreceiveName" rawSQL="true"
								resultcol="1"
								SQLResult="编号:0,药物名称:1,老人姓名:2,输入码:3,单次用量:4,单位:5,早:6,中:7,晚:8,饭前:9,有效:10"
								SQL="#{drugReceiveApplyController.addDrugSql}"
								fitcol="input_code" lock="true"
								multiresult="addRecordForm:drugreceiveId;0,addRecordForm:singleDose;4,addRecordForm:unit;5" />
							<h:inputHidden
								value="#{drugReceiveApplyController.addDrugApplyDetail.drugreceiveId}"
								id="drugreceiveId" /></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:commandLink
								update=":drugSearchForm,:drugForm,:message"
								oncomplete="drugDlg.show()" title="药物字典维护"
								action="#{drugReceiveApplyController.selectDrugList}">
								<p:graphicImage value="/images/plus_alt.png"
									style="border:0px;width: 20px;height: 20px;" />
							</p:commandLink></td>

						<td class="hengbiaogeHeader1"><label>单次用量:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="singleDose" disabled="true"
								value="#{drugReceiveApplyController.addDrugApplyDetail.singleDose}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label>单位:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="unit" disabled="true"
								value="#{drugReceiveApplyController.addDrugApplyDetail.unit}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="totalAmount">总量:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="totalAmount"
								value="#{drugReceiveApplyController.totalAmount}"></p:inputText>
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="shelflifeTime_input">保质期:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0" colspan="2"><p:calendar
								id="shelflifeTime" navigator="true"
								value="#{drugReceiveApplyController.addDrugApplyDetail.shelflifeTime}"
								pattern="yyyy-MM-dd"></p:calendar></td>
						<td class="hengbiaogeHeader1"><label>在用:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrugApplyDetail.inUseF}" />
						</td>
						<td><p:commandButton
								onstart="return checkNulls('addRecordForm','redfont',true);"
								actionListener="#{drugReceiveApplyController.addDrugDetail}"
								styleClass="commonbtn" value="添加" oncomplete="focusOnDrugName()"
								update=":addRecordForm,:message">
							</p:commandButton></td>
						<td><p:commandButton styleClass="blankbtn" value=""
								actionListener="#{drugReceiveApplyController.clearAddForm}"
								update=":addRecordForm" process="@this" /></td>
					</tr>
				</table>
				<table width="100%">
					<tr>
						<td><p:dataTable cellspacing="2" rows="7" style="width:100%"
								id="drugDetailTable"
								selection="#{drugReceiveApplyController.selectedDrugDetail}"
								value="#{drugReceiveApplyController.drugDetailList}"
								paginator="true" paginatorPosition="bottom"
								paginatorAlwaysVisible="false"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
								var="detail" rowKey="#{detail.id}" selectionMode="single"
								emptyMessage="没有相应记录">

								<p:ajax event="rowSelect"
									listener="#{drugReceiveApplyController.setEnableFlag}" />
								<p:ajax event="rowUnselect"
									listener="#{drugReceiveApplyController.setUnableFlag}" />
								<p:column headerText="药物名称" styleClass="width110">
									<h:outputText value="#{detail.drugreceiveName}" />
								</p:column>
								<p:column headerText="总量" styleClass="width50">
									<h:outputText value="#{detail.totalAmount}" />
								</p:column>
								<p:column headerText="单次用量" styleClass="width60">
									<h:outputText value="#{detail.singleDose}" />
								</p:column>
								<p:column headerText="单位" styleClass="width50">
									<h:outputText value="#{detail.unit}" />
								</p:column>
								<p:column headerText="早" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.morningF}"
										disabled="true" />
								</p:column>
								<p:column headerText="中" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.noonF}"
										disabled="true" />
								</p:column>
								<p:column headerText="晚" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.nightF}"
										disabled="true" />
								</p:column>
								<p:column headerText="饭前" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.eatTimeF}"
										disabled="true" />
								</p:column>
								<p:column headerText="在用" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.inUseF}"
										disabled="true" />
								</p:column>
								<p:column headerText="有效" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.validF}"
										disabled="true" />
								</p:column>
								<p:column headerText="保质期" styleClass="width80">
									<h:outputText value="#{detail.shelflifeTime}"
										styleClass="width100">
										<f:convertDateTime pattern="yyyy-MM-dd" />
									</h:outputText>
								</p:column>
							</p:dataTable></td>
					</tr>
				</table>
				<h:panelGrid id="buttonGrid" columns="4" style="margin:0px auto">
					<p:commandButton process="@this"
						actionListener="#{drugReceiveApplyController.saveAndSendApplication}"
						oncomplete="addConfirm(xhr,status,args)" styleClass="commonbtn"
						value="提交"
						update=":applicationForm:applicationTable,:message,:detailForm">
					</p:commandButton>
					<p:commandButton process="@this"
						actionListener="#{drugReceiveApplyController.saveApplication}"
						oncomplete="addConfirm(xhr,status,args)" styleClass="commonbtn"
						value="保存"
						update=":applicationForm:applicationTable,:message,:detailForm">
					</p:commandButton>
					<p:commandButton oncomplete="delDetailShow(xhr,status,args)"
						actionListener="#{drugReceiveApplyController.delDetailCinfirm}"
						styleClass="deletebtn" value="" update=":message">
					</p:commandButton>
					<p:commandButton onclick="addApplyDialog.hide()" type="button"
						styleClass="commonbtn" value="关闭" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- 删除药物接收明细的dialog -->
		<p:dialog appendToBody="true" modal="true" header="删除明细确认"
			widgetVar="confirmDelDetailDlg">
			<h:form id="confirmDelDetailForm">
				<h:panelGrid>
					<f:facet name="header">
						<h:outputText value="确定删除该药物接收明细？" style="font-weight:bold;" />
					</f:facet>
					<f:facet name="footer">
						<p:commandButton styleClass="submitbtn" value=""
							action="#{drugReceiveApplyController.deleteDrugDetail}"
							update=":addRecordForm,:editRecordForm,:message"
							oncomplete="confirmDelDetailDlg.hide()"></p:commandButton>
						<p:commandButton styleClass="cancelbtn" value="" type="button"
							onclick="confirmDelDetailDlg.hide();"></p:commandButton>
					</f:facet>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- 修改申请信息 -->
		<p:dialog header="修改接收药物" widgetVar="editApplyDialog"
			resizable="false" appendToBody="true" modal="true">
			<h:form id="editRecordForm" styleClass="noDisable">
				<table class="hengbiaoge" width="950px" align="center">
					<tr>
						<td class="hengbiaogeHeader1"><label>老人姓名:</label></td>
						<td class="hengbiaogedata" colspan="2" style="padding: 0 0 0 0"><p:inputText
								id="editOlderName" disabled="true"
								value="#{drugReceiveApplyController.addDrugApply.olderName}">
							</p:inputText></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editApplicantName">申请人:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="editApplicantName"
								value="#{drugReceiveApplyController.addDrugApply.applicantName}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editPhoneNo">联系电话:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="editPhoneNo"
								value="#{drugReceiveApplyController.addDrugApply.phoneNo}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editPelationShip">关系:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="editPelationShip"
								value="#{drugReceiveApplyController.addDrugApply.relationShip}">
							</p:inputText> <his:IME for="editRecordForm:relationShip" rawSQL="true"
								resultcol="1" SQLResult="编号:0,关系:1,输入码:2" sortcol="id"
								SQL="select p.id,p.relationShip,p.inputCode from pension_dic_relationship p"
								fitcol="inputCode" lock="true"
								multiresult="editRecordForm:editRelationshipId;0" /> <h:inputHidden
								value="#{drugReceiveApplyController.addDrugApply.relationshipId}"
								id="relationshipId" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editDrugreceiveName">药物名称:</label></td>
						<td class="hengbiaogedata" width="120" style="padding: 0 0 0 0"><p:inputText
								id="editDrugreceiveName"
								value="#{drugReceiveApplyController.addDrugApplyDetail.drugreceiveName}">
							</p:inputText> <his:IME for="editRecordForm:editDrugreceiveName" rawSQL="true"
								resultcol="1"
								SQLResult="编号:0,药物名称:1,老人姓名:2,输入码:3,单次用量:4,单位:5,早:6,中:7,晚:8,饭前:9,有效:10"
								SQL="#{drugReceiveApplyController.addDrugSql}"
								fitcol="input_code" lock="true"
								multiresult="editRecordForm:editDrugreceiveId;0,editRecordForm:editSingleDose;4,editRecordForm:editUnit;5" />
							<h:inputHidden
								value="#{drugReceiveApplyController.addDrugApplyDetail.drugreceiveId}"
								id="editDrugreceiveId" /></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:commandLink
								update=":drugSearchForm,:drugForm,:message"
								oncomplete="drugDlg.show()" title="药物字典维护"
								action="#{drugReceiveApplyController.selectDrugList}">
								<p:graphicImage value="/images/plus_alt.png"
									style="border:0px;width: 20px;height: 20px;" />
							</p:commandLink></td>
						<td class="hengbiaogeHeader1"><label>单次用量:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="editSingleDose" disabled="true"
								value="#{drugReceiveApplyController.addDrugApplyDetail.singleDose}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label>单位:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="editUnit" disabled="true"
								value="#{drugReceiveApplyController.addDrugApplyDetail.unit}"></p:inputText>
						</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editTotalAmount">总量:</label></td>
						<td class="hengbiaogedata" style="padding: 0 0 0 0"><p:inputText
								id="editTotalAmount"
								value="#{drugReceiveApplyController.totalAmount}"></p:inputText>
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editShelflifeTime_input">保质期:</label></td>
						<td class="hengbiaogedata" colspan="2" style="padding: 0 0 0 0"><p:calendar
								id="editShelflifeTime" navigator="true"
								value="#{drugReceiveApplyController.addDrugApplyDetail.shelflifeTime}"
								pattern="yyyy-MM-dd"></p:calendar></td>
						<td class="hengbiaogeHeader1"><label>在用:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrugApplyDetail.inUseF}" />
						</td>
						<td><p:commandButton
								onstart="return checkNulls('editRecordForm','redfont',true);"
								actionListener="#{drugReceiveApplyController.addDrugDetail}"
								styleClass="commonbtn" value="添加" oncomplete="focusOnEditDrug()"
								update=":editRecordForm,:message">
							</p:commandButton></td>
					</tr>
				</table>
				<table width="100%">
					<tr>
						<td><p:dataTable cellspacing="2" rows="7" style="width:100%"
								id="drugDetailTable"
								selection="#{drugReceiveApplyController.selectedDrugDetail}"
								value="#{drugReceiveApplyController.drugDetailList}"
								paginator="true" paginatorPosition="bottom"
								paginatorAlwaysVisible="false"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
								var="detail" rowKey="#{detail.id}" selectionMode="single"
								emptyMessage="没有相应记录">

								<p:ajax event="rowSelect"
									listener="#{drugReceiveApplyController.setEnableFlag}" />
								<p:ajax event="rowUnselect"
									listener="#{drugReceiveApplyController.setUnableFlag}" />
								<p:column headerText="药物名称" styleClass="width110">
									<h:outputText value="#{detail.drugreceiveName}" />
								</p:column>
								<p:column headerText="总量" styleClass="width50">
									<h:outputText value="#{detail.totalAmount}" />
								</p:column>
								<p:column headerText="单次用量" styleClass="width60">
									<h:outputText value="#{detail.singleDose}" />
								</p:column>
								<p:column headerText="单位" styleClass="width50">
									<h:outputText value="#{detail.unit}" />
								</p:column>
								<p:column headerText="早" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.morningF}"
										disabled="true" />
								</p:column>
								<p:column headerText="中" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.noonF}"
										disabled="true" />
								</p:column>
								<p:column headerText="晚" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.nightF}"
										disabled="true" />
								</p:column>
								<p:column headerText="饭前" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.eatTimeF}"
										disabled="true" />
								</p:column>
								<p:column headerText="在用" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.inUseF}"
										disabled="true" />
								</p:column>
								<p:column headerText="有效" styleClass="width50">
									<h:selectBooleanCheckbox value="#{detail.validF}"
										disabled="true" />
								</p:column>
								<p:column headerText="保质期" styleClass="width70">
									<h:outputText value="#{detail.shelflifeTime}">
										<f:convertDateTime pattern="yyyy-MM-dd" />
									</h:outputText>
								</p:column>
							</p:dataTable></td>
					</tr>
				</table>
				<h:panelGrid id="buttonGrid" columns="4" style="margin:0px auto">
					<p:commandButton process="@this"
						actionListener="#{drugReceiveApplyController.updateAndSendEditApplication}"
						oncomplete="editConfirm(xhr,status,args)" styleClass="commonbtn"
						value="提交"
						update=":applicationForm:applicationTable,:message,:detailForm">
					</p:commandButton>
					<p:commandButton process="@this"
						actionListener="#{drugReceiveApplyController.updateEditApplication}"
						oncomplete="editConfirm(xhr,status,args)" styleClass="commonbtn"
						value="保存"
						update=":applicationForm:applicationTable,:message,:detailForm">
					</p:commandButton>
					<p:commandButton oncomplete="delDetailShow(xhr,status,args)"
						actionListener="#{drugReceiveApplyController.delDetailCinfirm}"
						styleClass="deletebtn" value="" update=":message">
					</p:commandButton>
					<p:commandButton onclick="editApplyDialog.hide()" type="button"
						styleClass="cancelbtn" value="" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- 老人摆药维护 -->
		<p:dialog header="老人摆药维护" widgetVar="dispenseDlg" resizable="false"
			appendToBody="true" modal="true" position="top"
			style="margin-top:30px;">
			<h:form id="dispenseSearchForm">
				<table>
					<tr>
						<td class="leftcell">老人姓名:</td>
						<td><p:inputText
								value="#{drugReceiveApplyController.dispenseOlderName}"
								id="dispenseOlderName" /> <his:IME
								for="dispenseSearchForm:dispenseOlderName" rawSQL="true"
								resultcol="1" SQLResult="编号:0,姓名:1,输入码:2"
								SQL="#{drugReceiveApplyController.olderSql}" fitcol="inputCode"
								lock="true" multiresult="dispenseSearchForm:dispenseOlderId;0"
								sortcol="older_id" /> <h:inputHidden
								value="#{drugReceiveApplyController.dispenseOlderId}"
								id="dispenseOlderId" /></td>
						<td class="leftcell"><p:commandButton styleClass="searchbtn"
								value=""
								actionListener="#{drugReceiveApplyController.searchDispenseOlders}"
								update=":dispenseForm,:message" /></td>
					</tr>
				</table>
			</h:form>
			<h:form id="dispenseForm">
				<table width="100%">
					<tr>
						<td><p:dataTable cellspacing="2" rows="7" style="width:100%"
								id="dispenseTable"
								selection="#{drugReceiveApplyController.selectedDispense}"
								value="#{drugReceiveApplyController.olderList}" paginator="true"
								paginatorPosition="bottom" paginatorAlwaysVisible="false"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
								var="older" rowKey="#{older.id}" selectionMode="single"
								emptyMessage="没有相应记录">

								<p:ajax event="rowSelect"
									listener="#{drugReceiveApplyController.setEnableFlag}" />
								<p:ajax event="rowUnselect"
									listener="#{drugReceiveApplyController.setUnableFlag}" />
								<p:column headerText="老人姓名" styleClass="width60">
									<h:outputText value="#{older.olderName}" />
								</p:column>
								<p:column headerText="有效" styleClass="width60">
									<h:selectBooleanCheckbox value="#{older.validF}"
										disabled="true" />
								</p:column>
								<p:column headerText="配送分组" styleClass="width60">
									<h:outputText value="#{older.deliveryName}" />
								</p:column>
								<p:column headerText="护理员" styleClass="width60">
									<h:outputText value="#{older.chargerName}" />
								</p:column>
								<p:column headerText="护理部" styleClass="width60">
									<h:outputText value="#{older.nursedeptName}" />
								</p:column>
							</p:dataTable></td>
					</tr>
				</table>
			</h:form>
			<!-- 摆药信息维护 -->
			<h:form>
				<div align="center">
					<p:commandButton oncomplete="addDispenseDialog.show()"
						actionListener="#{drugReceiveApplyController.clearAddDispenseForm}"
						styleClass="addbtn" value="" update=":addDispenseForm">
					</p:commandButton>
					<p:commandButton oncomplete="editDispenseShow(xhr,status,args)"
						actionListener="#{drugReceiveApplyController.showEditDispenseForm}"
						update=":editDispenseForm,:message" styleClass="modifybtn"
						value="">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>

		<!-- 新增摆药老人 -->
		<p:dialog header="新增摆药老人" widgetVar="addDispenseDialog"
			style="margin-top:80px;margin-left:570px;" resizable="false"
			appendToBody="true" modal="true" position="top">
			<h:form id="addDispenseForm" styleClass="noDisable">
				<table class="hengbiaoge" width="430px" align="center">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addDispenseOlderName">老人姓名:</label></td>
						<td class="hengbiaogedata"><p:inputText
								id="addDispenseOlderName"
								value="#{drugReceiveApplyController.addDispenseOlder.olderName}">
							</p:inputText> <his:IME for="addDispenseForm:addDispenseOlderName"
								rawSQL="true" resultcol="1" SQLResult="编号:0,姓名:1,输入码:2"
								sortcol="id" SQL="#{drugReceiveApplyController.addOlderSql}"
								fitcol="inputCode" lock="true"
								multiresult="addDispenseForm:addDispenseOlderId;0" /> <h:inputHidden
								value="#{drugReceiveApplyController.addDispenseOlder.olderId}"
								id="addDispenseOlderId" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>有效:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDispenseOlder.validF}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="deliveryName">配送分组:</label></td>
						<td class="hengbiaogedata"><p:inputText id="deliveryName"
								value="#{drugReceiveApplyController.addDispenseOlder.deliveryName}"></p:inputText>
							<his:IME for="addDispenseForm:deliveryName" rawSQL="true"
								resultcol="1" SQLResult="编号:0,配送分组:1,输入码:2,负责人:3,部门:4"
								sortcol="id"
								SQL="select p.id,p.delivery_name,p.input_code,p.charger_name,p.nursedept_name from pension_dic_delivery p"
								fitcol="input_code" lock="true"
								multiresult="addDispenseForm:deliveryId;0,addDispenseForm:chargeName;3,addDispenseForm:deptName;4" />
							<h:inputHidden
								value="#{drugReceiveApplyController.addDispenseOlder.deliveryId}"
								id="deliveryId" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>负责人:</label></td>
						<td class="hengbiaogedata"><p:inputText id="chargeName"
								disabled="true"
								value="#{drugReceiveApplyController.addDispenseOlder.chargerName}"></p:inputText>
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>负责部门:</label></td>
						<td class="hengbiaogedata"><p:inputText id="deptName"
								disabled="true"
								value="#{drugReceiveApplyController.addDispenseOlder.nursedeptName}"></p:inputText>
						</td>
					</tr>
				</table>
				<h:panelGrid id="buttonGrid" columns="3" style="margin:0px auto">
					<p:commandButton process="@this,addDispenseForm"
						onstart="return checkNulls('addDispenseForm','redfont',true);"
						actionListener="#{drugReceiveApplyController.saveDispenseRecord}"
						oncomplete="addDispenseShow(xhr,status,args)"
						styleClass="submitbtn" value="" update=":dispenseForm,:message">
					</p:commandButton>
					<p:commandButton styleClass="blankbtn" value=""
						actionListener="#{drugReceiveApplyController.clearAddDispenseForm}"
						update=":addDispenseForm" process="@this" />
					<p:commandButton onclick="addDispenseDialog.hide()" type="button"
						styleClass="cancelbtn" value="" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- 修改摆药老人 -->
		<p:dialog header="修改摆药老人" widgetVar="editDispenseDialog"
			resizable="false" appendToBody="true" modal="true">
			<h:form id="editDispenseForm" styleClass="noDisable">
				<table class="hengbiaoge" width="430px" align="center">
					<tr>
						<td class="hengbiaogeHeader1"><label>老人姓名:</label></td>
						<td class="hengbiaogedata"><p:inputText disabled="true"
								value="#{drugReceiveApplyController.editDispenseOlder.olderName}">
							</p:inputText></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>有效:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.editDispenseOlder.validF}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="editDeliveryName">配送分组:</label></td>
						<td class="hengbiaogedata"><p:inputText id="editDeliveryName"
								value="#{drugReceiveApplyController.editDispenseOlder.deliveryName}"></p:inputText>
							<his:IME for="editDispenseForm:editDeliveryName" rawSQL="true"
								resultcol="1" SQLResult="编号:0,配送分组:1,输入码:2,负责人:3,部门:4"
								sortcol="id"
								SQL="select p.id,p.delivery_name,p.input_code,p.charger_name,p.nursedept_name from pension_dic_delivery p"
								fitcol="input_code" lock="true"
								multiresult="editDispenseForm:editDeliveryId;0,editDispenseForm:editChargeName;3,editDispenseForm:editDeptName;4" />
							<h:inputHidden
								value="#{drugReceiveApplyController.editDispenseOlder.deliveryId}"
								id="editDeliveryId" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>负责人:</label></td>
						<td class="hengbiaogedata"><p:inputText id="editChargeName"
								disabled="true"
								value="#{drugReceiveApplyController.editDispenseOlder.chargerName}"></p:inputText>
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>负责部门:</label></td>
						<td class="hengbiaogedata"><p:inputText id="editDeptName"
								disabled="true"
								value="#{drugReceiveApplyController.editDispenseOlder.nursedeptName}"></p:inputText>
						</td>
					</tr>
				</table>
				<h:panelGrid id="buttonGrid" columns="3" style="margin:0px auto">
					<p:commandButton
						onstart="return checkNulls('editDispenseForm','redfont',true);"
						actionListener="#{drugReceiveApplyController.updateDispenseRecord}"
						oncomplete="editDispenseHide(xhr,status,args)"
						styleClass="submitbtn" value=""
						update=":dispenseForm,:message,:applicationForm">
					</p:commandButton>
					<p:commandButton onclick="editDispenseDialog.hide()" type="button"
						styleClass="cancelbtn" value="" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<!-- 药物字典维护 -->
		<p:dialog header="药物字典维护" widgetVar="drugDlg" resizable="false"
			appendToBody="true" modal="true">
			<h:form id="drugSearchForm">
				<table>
					<tr>
						<td class="leftcell">老人姓名:</td>
						<td><p:inputText
								value="#{drugReceiveApplyController.drugOlderName}"
								id="drugOlderName" /> <his:IME
								for="drugSearchForm:drugOlderName" rawSQL="true" resultcol="1"
								SQLResult="编号:0,姓名:1,输入码:2"
								SQL="#{drugReceiveApplyController.drugOlderSql}"
								fitcol="inputCode" lock="true"
								multiresult="drugSearchForm:drugOlderId;0" sortcol="id" /> <h:inputHidden
								value="#{drugReceiveApplyController.drugOlderId}"
								id="drugOlderId" /></td>
						<td class="leftcell">药品名称:</td>
						<td><p:inputText
								value="#{drugReceiveApplyController.drugName}" id="drugName" />
							<his:IME for="drugSearchForm:drugName" rawSQL="true"
								resultcol="0" SQLResult="药品名称:0,输入码:1"
								SQL="#{drugReceiveApplyController.drugSql}" fitcol="input_code"
								lock="true" /></td>
						<td class="leftcell"><p:commandButton styleClass="searchbtn"
								value=""
								actionListener="#{drugReceiveApplyController.searchDrugList}"
								update=":drugForm,:message" /></td>
						<td class="leftcell"><p:commandButton styleClass="blankbtn"
								value=""
								actionListener="#{drugReceiveApplyController.clearDrugCondition}"
								update=":drugSearchForm" /></td>
					</tr>
				</table>
			</h:form>
			<h:form id="drugForm">
				<table width="100%">
					<tr>
						<td><p:dataTable cellspacing="2" rows="5" style="width:100%"
								id="drugTable"
								selection="#{drugReceiveApplyController.selectedDrug}"
								value="#{drugReceiveApplyController.drugList}" paginator="true"
								paginatorPosition="bottom" paginatorAlwaysVisible="false"
								paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
								var="drug" rowKey="#{drug.id}" selectionMode="single"
								emptyMessage="没有相应记录">

								<p:ajax event="rowSelect"
									listener="#{drugReceiveApplyController.setEnableFlag}" />
								<p:ajax event="rowUnselect"
									listener="#{drugReceiveApplyController.setUnableFlag}" />
								<p:column headerText="老人姓名" styleClass="width60">
									<h:outputText value="#{drug.olderName}" />
								</p:column>
								<p:column headerText="药品名称" styleClass="width130">
									<h:outputText value="#{drug.drugreceiveName}" />
								</p:column>
								<p:column headerText="单次用量" styleClass="width60">
									<h:outputText value="#{drug.singleDose}" />
								</p:column>
								<p:column headerText="单位" styleClass="width50">
									<h:outputText value="#{drug.unit}" />
								</p:column>
								<p:column headerText="有效" styleClass="width50">
									<h:selectBooleanCheckbox value="#{drug.validF}" disabled="true" />
								</p:column>
								<p:column headerText="早" styleClass="width50">
									<h:selectBooleanCheckbox value="#{drug.morningF}"
										disabled="true" />
								</p:column>
								<p:column headerText="中" styleClass="width50">
									<h:selectBooleanCheckbox value="#{drug.noonF}" disabled="true" />
								</p:column>
								<p:column headerText="晚" styleClass="width50">
									<h:selectBooleanCheckbox value="#{drug.nightF}" disabled="true" />
								</p:column>
								<p:column headerText="饭前" styleClass="width50">
									<h:selectBooleanCheckbox value="#{drug.eatTimeF}"
										disabled="true" />
								</p:column>
							</p:dataTable></td>
					</tr>
				</table>
			</h:form>
			<!-- 药物字典维护 -->
			<h:form>
				<div align="center">
					<p:commandButton oncomplete="addDrugDialog.show()"
						actionListener="#{drugReceiveApplyController.clearAddDrugForm}"
						styleClass="addbtn" value="" update=":addDrugForm">
					</p:commandButton>
					<p:commandButton
						actionListener="#{drugReceiveApplyController.startDrug}"
						update=":drugForm,:detailForm,:message" styleClass="commonbtn"
						value="启用">
					</p:commandButton>
					<p:commandButton
						actionListener="#{drugReceiveApplyController.stopDrug}"
						update=":drugForm,:detailForm,:message" styleClass="commonbtn"
						value="停用">
					</p:commandButton>
					<p:commandButton styleClass="commonbtn" value="关闭"
						onclick="drugDlg.hide()" type="button"></p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<!-- 新增药物字典 -->
		<p:dialog header="新增药物字典" widgetVar="addDrugDialog" resizable="false"
			appendToBody="true" modal="true">
			<h:form id="addDrugForm" styleClass="noDisable">
				<table class="hengbiaoge" width="250px" align="center">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addDrugOlderName">老人姓名:</label></td>
						<td class="hengbiaogedata"><p:inputText id="addDrugOlderName"
								value="#{drugReceiveApplyController.addDrug.olderName}">
							</p:inputText> <his:IME for="addDrugForm:addDrugOlderName" rawSQL="true"
								resultcol="1" SQLResult="编号:0,姓名:1,输入码:2" sortcol="id"
								SQL="#{drugReceiveApplyController.addOlderSql}"
								fitcol="inputCode" lock="true"
								multiresult="addDrugForm:addDrugOlderId;0" /> <h:inputHidden
								value="#{drugReceiveApplyController.addDrug.olderId}"
								id="addDrugOlderId" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addDrugName">药品名称:</label></td>
						<td class="hengbiaogedata"><p:inputText id="addDrugName"
								value="#{drugReceiveApplyController.addDrug.drugreceiveName}"></p:inputText>
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="singleDose">单次用量:</label></td>
						<td class="hengbiaogedata"><p:inputText id="singleDose"
								value="#{drugReceiveApplyController.addDrug.singleDose}"></p:inputText>
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="unit">单位:</label></td>
						<td class="hengbiaogedata"><p:inputText id="unit"
								value="#{drugReceiveApplyController.addDrug.unit}"></p:inputText>
							<his:IME for="addDrugForm:unit" rawSQL="true" resultcol="1"
								SQLResult="编号:0,单位:1,输入码:2" sortcol="id"
								SQL="select id,unitName,inputCode from pension_dic_unit"
								fitcol="inputCode" lock="true" /></td>
					</tr>


					<tr>
						<td class="hengbiaogeHeader1"><label>早:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrug.morningF}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>中:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrug.noonF}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>晚:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrug.nightF}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>饭前:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrug.eatTimeF}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label>有效:</label></td>
						<td class="hengbiaogedata"><h:selectBooleanCheckbox
								value="#{drugReceiveApplyController.addDrug.validF}" /></td>
					</tr>
				</table>
				<h:panelGrid id="buttonGrid" columns="3" style="margin:0px auto">
					<p:commandButton process="@this,addDrugForm"
						onstart="return checkNulls('addDrugForm','redfont',true);"
						actionListener="#{drugReceiveApplyController.saveDrugRecord}"
						oncomplete="addDrugHide(xhr,status,args)" styleClass="submitbtn"
						value="" update=":drugForm,:addDrugForm,:message">
					</p:commandButton>
					<p:commandButton styleClass="blankbtn" value=""
						actionListener="#{drugReceiveApplyController.clearAddDrugForm}"
						update=":addDrugForm" process="@this" />
					<p:commandButton onclick="addDrugDialog.hide()" type="button"
						styleClass="cancelbtn" value="" />
				</h:panelGrid>
			</h:form>
		</p:dialog>

		<script type="text/javascript">
			function addConfirm(xhr, status, args) {
				if (args.addHide) {
					addApplyDialog.hide();
				}
			}

			function editApplyDialogShow(xhr, status, args) {
				if (args.edit) {
					editApplyDialog.show();
				}
			}

			function editConfirm(xhr, status, args) {
				if (args.editHide) {
					editApplyDialog.hide();
				}
			}

			function confirmDelDialogShow(xhr, status, args) {
				if (args.del) {
					confirmDelDialog.show();
				}
			}
			//隐藏新增老人摆药对话框
			function addDispenseShow(xhr, status, args) {
				if (args.dispenseHide) {
					addDispenseDialog.hide();
				}
			}
			//显示修改老人摆药对话框
			function editDispenseShow(xhr, status, args) {
				if (args.editDispenseShow) {
					editDispenseDialog.show();
				}
			}
			//隐藏修改老人摆药对话框
			function editDispenseHide(xhr, status, args) {
				if (args.editDispenseHide) {
					editDispenseDialog.hide();
				}
			}
			//隐藏新增药物字典对话框
			function addDrugHide(xhr, status, args) {
				if (args.addDrugHide) {
					jQuery("#addDrugForm\\:addDrugOlderName").focus();
				}
			}
			//显示删除明细确认对话框
			function delDetailShow(xhr, status, args) {
				if (args.detailShow) {
					confirmDelDetailDlg.show();
				}
			}
			function focusOnDrugName() {
				jQuery("#addRecordForm\\:drugreceiveName").focus();
			}
			function focusOnEditDrug() {
				jQuery("#editRecordForm\\:editDrugreceiveName").focus();
			}

			/*  取消滚动条
			 */
			jQuery(document).ready(function() {
				cleanBar();
			});
		</script>
	</h:body>
</f:view>
</html>