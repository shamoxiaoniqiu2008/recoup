<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:his="http://centling.his.net/histag">

<!-- 回车键，往下！引入的js文件 -->
<f:view contentType="text/html">
	<h:head>
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/default.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/skin.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/layout.css"></link>
		<link href="#{request.contextPath}/css/css.css" rel="stylesheet"
			type="text/css" />
		<link rel="stylesheet" href="#{request.contextPath}/css/style.css"></link>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/ime.js?ver=#{projectConfig.ver}" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/common.js?ver=#{projectConfig.ver}" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/calendar.js?ver=#{projectConfig.ver}" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/calendar.js?ver=#{projectConfig.ver}" />
	</h:head>

	<style>
.old {
	background-color: #99FF99;
	background-image: none !important;
	color: #000000 !important;
}

.overdiv {
	cursor: pointer;
	display: block;
	font-size: 12px;
	overflow: hidden;
	height: 18px;
	width: 90px;
	border: 0px solid #e6e6e6;
}

.overdivscroll {
	cursor: pointer;
	display: block;
	font-size: 12px;
	overflow: auto;
	height: 230px;
	width: 90px;
	border: 0px solid #e6e6e6;
}

.alignTop tr td {
	vertical-align: top;
}
</style>
	<h:body>
		<p:growl id="message" widgetVar="message"></p:growl>
		<h:form id="headForm">
			<h:panelGrid columns="15">
				<!-- 输入起始时间和截止时间 -->
				<h:outputText value="&nbsp;&nbsp;就医日期:" style="width:80" />
				<p:calendar id="startDate" pattern="yyyy-MM-dd" size="15"
					value="#{medicalRegisterController.startDate}" />
				<h:outputText value="至:" style="width:80" />
				<p:calendar id="endDate" pattern="yyyy-MM-dd" size="15"
					value="#{medicalRegisterController.endDate}" />

				<h:selectOneMenu style="width:145px;"
					class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker ui-state-hover"
					value="#{medicalRegisterController.grouped}">
					<f:selectItem itemValue="" itemLabel="所有" />
					<f:selectItem itemValue="1" itemLabel="已分组" />
					<f:selectItem itemValue="2" itemLabel="未分组" />
				</h:selectOneMenu>

				<h:outputLabel value="老人姓名:" for="headForm:nameText" />
				<h:panelGroup>
					<p:inputText id="nameText" style="width:120px" />
					<his:IME for="headForm:nameText" fitcol="inputCode" resultcol="0"
						lock="true" rawSQL="true"
						SQL="#{medicalRegisterController.olderNameSql}"
						SQLResult="老人姓名:0,大厦:1,楼层:2,房间:3,床位:4,老人Id:5:hide,输入码:6"
						multiresult="headForm:olderIdHd;5" />
					<h:inputHidden id="olderIdHd"
						value="#{medicalRegisterController.olderId}" />
				</h:panelGroup>



				<p:commandButton id="searchButton"
					action="#{medicalRegisterController.selectMedicalRegisterRecords}"
					styleClass="searchbtn" value=""
					update=":dataTableForm,:maintainForm,:message" />
				<p:commandButton oncomplete="clearSelectForm()"
					styleClass="blankbtn" value=""
					action="#{medicalRegisterController.clearSelectForm}"
					update=":headForm" />
			</h:panelGrid>
		</h:form>
		<h:form id="dataTableForm">
			<h:panelGrid id="medicalRegisterRecord" style="width:100%">
				<p:dataTable cellspacing="8" rows="10" style="width:100%"
					styleClass="alignTop" id="medicalRegisterTable" rowIndexVar="row"
					value="#{medicalRegisterController.records}" var="record"
					rowKey="#{record.id}" emptyMessage="没有相应记录"
					selection="#{medicalRegisterController.selectedRows}"
					paginator="true" paginatorPosition="bottom"
					paginatorAlwaysVisible="false"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
					<p:ajax event="rowSelect"
						listener="#{medicalRegisterController.selectRecord}"
						update=":maintainForm" />
					<p:ajax event="rowUnselect"
						listener="#{medicalRegisterController.unSelectRecord}"
						update=":maintainForm" />
					<p:ajax event="rowSelectCheckbox"
						listener="#{medicalRegisterController.selectRecord}"
						update=":maintainForm" />
					<p:ajax event="rowUnselectCheckbox"
						listener="#{medicalRegisterController.unSelectRecord}"
						update=":maintainForm" />

					<p:column selectionMode="multiple" width="30">
					</p:column>

					<p:column headerText="分组" styleClass="width50">
						<h:outputText
							styleClass="#{(record.groupId eq null)?'':'redfont'}"
							value="#{(record.groupId eq null)?'未分':'已分'}" />
					</p:column>

					<p:column headerText="姓名" styleClass="width50">
						<h:outputText value="#{record.olderName}" />
					</p:column>
					<p:column headerText="就医日期" styleClass="width80">
						<h:outputText value="#{record.hospitalizetime}">
							<f:convertDateTime pattern="yyyy-MM-dd" />
						</h:outputText>
					</p:column>
					<p:column headerText="就医类型" styleClass="width60">
						<h:outputText value="#{record.type}" />
					</p:column>
					<p:column headerText="就医事项">
						<div title="more..."
							onDblClick="clickChageHeight(this,'overdiv','overdivscroll');"
							onselectstart="return false" class="overdiv">
							#{record.hospitalizeissue}</div>
					</p:column>
					<p:column headerText="预交金" styleClass="width50">
						<h:outputText value="#{record.advance}" />
					</p:column>

					<p:column headerText="返还金" styleClass="width50">
						<h:outputText value="#{record.backmoney}" />
					</p:column>
					<p:column headerText="交付物品">
						<div title="more..."
							onDblClick="clickChageHeight(this,'overdiv','overdivscroll');"
							onselectstart="return false" class="overdiv">
							#{record.things}</div>
					</p:column>
					<p:column headerText="返院登记" styleClass="width60">
						<h:outputText value="已登记" rendered="#{record.isback == 1}" />
						<h:outputText value="未登记" rendered="#{record.isback== null}" />
					</p:column>
					<p:column headerText="出发时间" styleClass="width80">
						<h:outputText value="#{record.leaveTime}">
							<f:convertDateTime pattern="HH:mm" />
						</h:outputText>
					</p:column>
					<p:column headerText="返院时间" styleClass="width80">
						<h:outputText value="#{record.backtime}" styleClass="width80">
							<f:convertDateTime pattern="HH:mm" />
						</h:outputText>
					</p:column>
					<p:column headerText="负责人" styleClass="width50">
						<h:outputText value="#{record.managerName}" />
					</p:column>
				</p:dataTable>
			</h:panelGrid>
			<script>
		$(document).ready(function(){
			//$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:eq(0)").off('click');
			$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:eq(0)").on('click',function(){
				if($("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box").length > 1) {
					$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:gt(0)").each(function(){
						$(this).click();
						$(this).click();
					});
					
				//	$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:eq(1)").click();
				//	$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:eq(1)").click();
				}
			});
			
			function regClick() {
				$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:gt(0)").off('click');
				$("#dataTableForm\\:medicalRegisterTable .ui-chkbox-box:gt(0)").on('click',function(){
					if($(this).parent().parent().parent().find(".redfont").length >0) {
						if($(this).parent().parent().find(".ui-icon-check").length == 0) {
							return confirm("已经分组，是否对其选中操作");
						}
					}
				});
				//$("#dataTableForm\\:medicalRegisterTable_paginator_bottom .ui-paginator-page").off('click');
				$("#dataTableForm\\:medicalRegisterTable_paginator_bottom .ui-paginator-page").on('click',function(){
					reRegClcik();
					return false;
				});

				$("#dataTableForm\\:medicalRegisterTable_paginator_bottom .ui-icon-seek-next").on('click',function(){
					reRegClcik();
				});

				$("#dataTableForm\\:medicalRegisterTable_paginator_bottom .ui-icon-seek-end").on('click',function(){
					reRegClcik();
				});

				$("#dataTableForm\\:medicalRegisterTable_paginator_bottom .ui-icon-seek-prev").on('click',function(){
					reRegClcik();
				});

				$("#dataTableForm\\:medicalRegisterTable_paginator_bottom .ui-icon-seek-first").on('click',function(){
					reRegClcik();
				});
				reRegClcik = function() {
					setTimeout(function(){
						regClick();
					},100);
				}
			}
			
			regClick();
			
		});
		</script>

		</h:form>
		<h:form id="maintainForm">
			<div align="center">
				<p:commandButton styleClass="commonbtn" value="就医登记"
					action="#{medicalRegisterController.clearInsertForm}"
					oncomplete="insertRecordDialog.show()"
					update=":dataTableForm,:message,:maintainForm,:insertForm" />
				<p:commandButton styleClass="deletebtn" value=""
					update=":dataTableForm,:message,:maintainForm"
					actionListener="#{medicalRegisterController.selectCheck}"
					oncomplete="confirmDeleteDialogShow(xhr, status, args)" />
				<p:commandButton styleClass="modifybtn" value=""
					action="#{medicalRegisterController.copyRecordUpdatedRow}"
					oncomplete="handleUpdateDialogInit(xhr, status, args)"
					update=":dataTableForm,:message,:updateForm,:message" />
				<p:commandButton styleClass="commonbtn" value="详细信息"
					action="#{medicalRegisterController.showDetailButton}"
					oncomplete="handleDetail(xhr, status, args)"
					update=":message,:detailGroupForm" />
				<p:commandButton styleClass="commonbtn" value="返院登记"
					action="#{medicalRegisterController.regBackRecordUpdatedRow}"
					oncomplete="handleBackRegisiterDialogInit(xhr, status, args)"
					update=":backedRegisterForm,:maintainForm,:message" />
				<p:commandButton value="加入新分组" styleClass="commonbtn"
					actionListener="#{medicalRegisterController.selectCheck}"
					oncomplete="toNewGroupRecordDialogShow(xhr, status, args)"
					update=":dataTableForm,:message,:maintainForm" />
				<p:commandButton value="加入已有分组" styleClass="commonbtn"
					actionListener="#{medicalRegisterController.checkGroup}"
					oncomplete="addToGroupDialogShow(xhr, status, args)"
					update=":addToGroupForm,:message" />

				<p:commandButton value="分组管理" styleClass="commonbtn"
					action="#{medicalRegisterController.selectGroupRecords}"
					update=":GroupHeadForm,:olderInfoForm"
					oncomplete="initGroupManageDialog()" />
			</div>
		</h:form>
		<p:dialog header="新增" widgetVar="insertRecordDialog" resizable="false"
			appendTo="@(body)" position="top" modal="true">
			<h:form id="insertForm">
				<table class="hengbiaoge" width="100%" id="insertTable">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="nameText">老人姓名:</label></td>
						<td class="hengbiaogedata"><h:panelGroup>
								<p:inputText id="nameText"
									value="#{medicalRegisterController.insertedRow.olderName}">
								</p:inputText>
								<his:IME for="insertForm:nameText" fitcol="inputCode"
									resultcol="0" lock="true" rawSQL="true"
									SQL="#{entryVacationApplicationController.olderNameSql}"
									SQLResult="老人姓名:0,大厦:1,楼层:2,房间:3,床位:4,老人Id:5:hide,输入码:6"
									multiresult="insertForm:buildingText;1,insertForm:buildingHd;1,insertForm:roomText;3,insertForm:roomHd;3,insertForm:bedNoText;4,insertForm:bedNoHd;4,insertForm:olderIdHd;5" />
								<h:inputHidden id="olderIdHd"
									value="#{medicalRegisterController.insertedRow.olderId}" />
							</h:panelGroup></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="大厦:"
								for="buildingText" /></td>
						<td class="hengbiaogedata"><p:inputText id="buildingText"
								readonly="true"
								value="#{medicalRegisterController.insertedRow.buildName}" /> <h:inputHidden
								id="buildingHd"
								value="#{medicalRegisterController.insertedRow.buildName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="房间:"
								for="roomText" /></td>
						<td class="hengbiaogedata"><p:inputText id="roomText"
								readonly="true"
								value="#{medicalRegisterController.insertedRow.roomName}" /> <h:inputHidden
								id="roomHd"
								value="#{medicalRegisterController.insertedRow.roomName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="床位号:"
								for="bedNoText" /></td>
						<td class="hengbiaogedata"><p:inputText id="bedNoText"
								readonly="true"
								value="#{medicalRegisterController.insertedRow.bedName}" /> <h:inputHidden
								id="bedNoHd"
								value="#{medicalRegisterController.insertedRow.bedName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalDate_input">就医日期:</label></td>
						<td class="hengbiaogedata"><p:calendar id="medicalDate"
								pattern="yyyy-MM-dd" required="true" size="20"
								requiredMessage="请输入就医日期!"
								value="#{medicalRegisterController.insertedRow.hospitalizetime}" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalTypeText">就医类型:</label></td>
						<td class="hengbiaogedata"><p:inputText id="medicalTypeText"
								required="true" requiredMessage="请输入就医类型!"
								value="#{medicalRegisterController.insertedRow.type}" /> <his:IME
								for="insertForm:medicalTypeText" fitcol="inputCode"
								resultcol="1" lock="true" rawSQL="true"
								SQL="select * from pension_dic_hospitalize pdh where pdh.invalided  = 1"
								SQLResult="主键:0:hide,类型名:2,输入码:1"
								multiresult="insertForm:typeIdHd;0" /> <h:inputHidden
								id="typeIdHd"
								value="#{medicalRegisterController.insertedRow.hospitalizetypeId}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalIssueText">就医事项:</label></td>
						<td class="hengbiaogedata"><p:inputText id="medicalIssueText"
								value="#{medicalRegisterController.insertedRow.hospitalizeissue}" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceText">预交金:</label></td>
						<td class="hengbiaogedata"><p:inputText id="advanceText"
								converterMessage="预交金必须为两位正小数!如:100.12"
								validatorMessage="预交金必须为两位正小数!如:100.12"
								value="#{medicalRegisterController.insertedRow.advance}">
								<f:validateDoubleRange minimum="0.01"
									for="insertRecordDialog:advanceText" />
							</p:inputText></td>
					</tr>
				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						onstart="return checkNulls('insertForm','redfont',true);"
						action="#{medicalRegisterController.insertMedicalRegisterRecord}"
						oncomplete="handleDialogComplete(xhr, status, args)"
						process="@this,insertForm"
						update=":maintainForm,:insertForm,:dataTableForm,:message" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="insertRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<p:confirmDialog modal="true" appendTo="@(body)"
			widgetVar="confirmDeleteDialog" message="确定要删除此登记记录吗？">
			<h:form>
				<p:commandButton styleClass="commonbtn" value="确定"
					action="#{medicalRegisterController.deleteMedicalRegisterRecord}"
					update=":dataTableForm,:maintainForm,:message"
					oncomplete="confirmDeleteDialog.hide();">
				</p:commandButton>
				<p:commandButton styleClass="commonbtn" value="取消" type="reset"
					onclick="confirmDeleteDialog.hide();"></p:commandButton>
			</h:form>
		</p:confirmDialog>
		<p:dialog header="修改" widgetVar="updateRecordDialog" resizable="false"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="updateForm">
				<table class="hengbiaoge" width="100%" id="updateTable">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="nameText">老人姓名:</label></td>
						<td class="hengbiaogedata"><p:inputText id="nameText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.olderName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="大厦:"
								for="buildingText" /></td>
						<td class="hengbiaogedata"><p:inputText id="buildingText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.buildName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="房间:"
								for="roomText" /></td>
						<td class="hengbiaogedata"><p:inputText id="roomText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.roomName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="床位号:"
								for="bedNoText" /></td>
						<td class="hengbiaogedata"><p:inputText id="bedNoText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.bedName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalDate_input">就医日期:</label></td>
						<td class="hengbiaogedata"><p:calendar id="medicalDate"
								pattern="yyyy-MM-dd" size="20"
								value="#{medicalRegisterController.updatedRow.hospitalizetime}" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalTypeText">就医类型:</label></td>
						<td class="hengbiaogedata"><p:inputText id="medicalTypeText"
								value="#{medicalRegisterController.updatedRow.type}" /> <his:IME
								for="updateForm:medicalTypeText" fitcol="inputCode"
								resultcol="1" lock="true" rawSQL="true"
								SQL="select * from pension_dic_hospitalize pdh where pdh.invalided  = 1"
								SQLResult="主键:0:hide,类型名:2,输入码:1"
								multiresult="updateForm:typeIdHd;0" /> <h:inputHidden
								id="typeIdHd"
								value="#{medicalRegisterController.updatedRow.hospitalizetypeId}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalIssueText">就医事项:</label></td>
						<td class="hengbiaogedata"><p:inputText id="medicalIssueText"
								value="#{medicalRegisterController.updatedRow.hospitalizeissue}" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceText">预交金:</label></td>
						<td class="hengbiaogedata"><p:inputText id="advanceText"
								converterMessage="预交金必须为两位正小数!如:100.12"
								validatorMessage="预交金必须为两位正小数!如:100.12"
								value="#{medicalRegisterController.updatedRow.advance}">
								<f:validateDoubleRange minimum="0.01"
									for="insertRecordDialog:advanceText" />
							</p:inputText></td>
					</tr>
				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						onstart="return checkNulls('updateForm','redfont',true);"
						action="#{medicalRegisterController.updateMedicalRegisterRecord}"
						oncomplete="handleDialogComplete(xhr, status, args)"
						update=":maintainForm,:updateForm,:dataTableForm,:message" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="updateRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<p:dialog header="返院登记" widgetVar="backedRegisterDialog"
			resizable="false" appendTo="@(body)" position="center" modal="true">
			<h:form id="backedRegisterForm">
				<table class="hengbiaoge" width="100%" id="updateTable">
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="老人姓名:"
								for="nameText" /></td>
						<td class="hengbiaogedata"><p:inputText id="nameText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.olderName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="大厦:"
								for="buildingText" /></td>
						<td class="hengbiaogedata"><p:inputText id="buildingText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.buildName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="房间:"
								for="roomText" /></td>
						<td class="hengbiaogedata"><p:inputText id="roomText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.roomName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="床位号:"
								for="bedNoText" /></td>
						<td class="hengbiaogedata"><p:inputText id="bedNoText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.bedName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="就医日期:"
								for="medicalDate" /></td>
						<td class="hengbiaogedata"><p:calendar id="medicalDate"
								pattern="yyyy-MM-dd" readonly="true" size="20"
								value="#{medicalRegisterController.updatedRow.hospitalizetime}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="就医事项:"
								for="medicalIssueText" /></td>
						<td class="hengbiaogedata"><p:inputText id="medicalIssueText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.hospitalizeissue}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="预交金:"
								for="advanceText" /></td>
						<td class="hengbiaogedata"><p:inputText id="advanceText"
								readonly="true"
								value="#{medicalRegisterController.updatedRow.advance}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="返院时间:"
								for="backtime" /></td>
						<td class="hengbiaogedata"><p:calendar id="backtime"
								pattern="yyyy-MM-dd HH:mm" required="true" size="20"
								requiredMessage="请输入就医日期!"
								value="#{medicalRegisterController.updatedRow.backtime}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="返还金额:"
								for="backMoneyText" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:inputText id="backMoneyText"
								required="true" requiredMessage="返还金额不能为空!且必须为两位小数!如:100.12"
								converterMessage="返还金额必须为两位正小数!如:100.12"
								validatorMessage="返还金额必须为两位正小数!如:100.12"
								value="#{medicalRegisterController.updatedRow.backmoney}">
								<f:validateDoubleRange for="backedRegisterDialog:backMoneyText" />
							</p:inputText></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="交付物品:"
								for="thingsText" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:inputTextarea id="thingsText"
								autoResize="true" cols="16" rows="1" required="true"
								requiredMessage="请填写交付物品"
								value="#{medicalRegisterController.updatedRow.things}" /></td>
					</tr>
				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						action="#{medicalRegisterController.backedRegister}"
						oncomplete="handleDialogComplete(xhr, status, args)"
						update=":backedRegisterForm,:dataTableForm,:message" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="backedRegisterDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<p:confirmDialog modal="true" appendTo="@(body)"
			widgetVar="confirmGroupDialog" message="确定要对这些人进行分组吗？">
			<h:form>
				<p:commandButton styleClass="commonbtn" value="确定"
					update=":dataTableForm,:maintainForm,:message"
					onclick="groupRecordDialog.show()"
					oncomplete="confirmGroupDialog.hide();">
				</p:commandButton>
				<p:commandButton styleClass="commonbtn" value="取消" type="reset"
					onclick="confirmGroupDialog.hide();"></p:commandButton>
			</h:form>
		</p:confirmDialog>
		<p:dialog header="分组" widgetVar="groupRecordDialog" resizable="false"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="groupForm">
				<table class="hengbiaoge" width="100%" id="groupTable">
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="分组负责人:"
								for="nameText" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><h:panelGroup>
								<p:inputText id="nameText" style="width:120px" required="true"
									requiredMessage="请输入分组负责人!"
									value="#{medicalRegisterController.managerName}" />
								<his:IME for="groupForm:nameText" fitcol="inputCode"
									resultcol="0" lock="true" rawSQL="true"
									SQL="#{medicalRegisterController.groupSql}"
									SQLResult="负责人:0,车牌号:1,出发时间:2,返回时间:3,分组id:4:hide,输入码:6"
									multiresult="groupForm:carnumberText;1,groupForm:leaveDate;2,groupForm:backDate;3,groupForm:groupIdHd;4" />
								<h:inputHidden id="groupIdHd"
									value="#{medicalRegisterController.groupId}" />
							</h:panelGroup></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="车牌号:"
								for="carnumberText" /></td>
						<td class="hengbiaogedata"><p:inputText id="carnumberText"
								style="width:120px" readonly="true" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="出发时间:"
								for="leaveDate" /></td>
						<td class="hengbiaogedata"><p:inputText id="leaveDate"
								style="width:120px" readonly="true">
								<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
							</p:inputText></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="返还时间:"
								for="backDate" /></td>
						<td class="hengbiaogedata"><p:inputText id="backDate"
								style="width:120px" readonly="true">
								<f:convertDateTime pattern="yyyy-MM-dd" timeZone="GMT+8" />
							</p:inputText></td>
					</tr>

				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						oncomplete="handleDialogComplete(xhr, status, args)"
						process="@this,groupForm"
						action="#{medicalRegisterController.groupingMedicalRegisterRecord}"
						update=":maintainForm,:groupForm,:dataTableForm,:message" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="groupRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>

		<p:dialog header="分组管理" widgetVar="groupManageDialog"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="GroupHeadForm">
				<h:panelGrid columns="15">

					<h:outputLabel value="负责人姓名:" for="GroupHeadForm:nameText" />
					<h:panelGroup>
						<p:inputText id="nameText" style="width:120px" />
						<his:IME for="GroupHeadForm:nameText" fitcol="inputCode"
							resultcol="0" lock="true" rawSQL="true"
							SQL="#{medicalRegisterController.managerNameSql}"
							SQLResult="负责人:0,部门:1,输入码:2,负责人Id:3:hide"
							multiresult="GroupHeadForm:managerIdHd;3" />
						<h:inputHidden id="managerIdHd"
							value="#{medicalRegisterController.managerId}" />
					</h:panelGroup>

					<!-- 输入起始时间和截止时间 -->
					<h:outputText value="&nbsp;&nbsp;出发时间:" style="width:80" />
					<p:calendar id="startDate" pattern="yyyy-MM-dd" size="15"
						value="#{medicalRegisterController.startGroupDate}" />
					<h:outputText value="至:" style="width:80" />
					<p:calendar id="endDate" pattern="yyyy-MM-dd" size="15"
						value="#{medicalRegisterController.endGroupDate}" />
					<p:commandButton id="searchButton"
						action="#{medicalRegisterController.searchGroupRecordsManagerId}"
						styleClass="searchbtn" value="" update=":GroupHeadForm,:message" />
				</h:panelGrid>

				<h:panelGrid id="medicalGroupRecord" style="width:100%">
					<p:dataTable cellspacing="8" rows="5" style="width:100%"
						id="medicalRegisterTable" rowIndexVar="row"
						value="#{medicalRegisterController.grouRecords}" var="record"
						rowKey="#{record.id}" selectionMode="single" emptyMessage="没有相应记录"
						selection="#{medicalRegisterController.selectedGroup}"
						paginator="true" paginatorPosition="bottom"
						paginatorAlwaysVisible="false"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">


						<p:ajax event="rowSelect" update=":GroupHeadForm"
							listener="#{medicalRegisterController.setEnableFLag}" />
						<p:ajax event="rowUnselect" update=":GroupHeadForm"
							listener="#{medicalRegisterController.unSelectEditGroupRecord}" />
						<p:column headerText="详情" styleClass="width50">
							<p:commandLink update=":olderInfoForm,:message"
								oncomplete="olderInfoDialog.show()" title="查看"
								action="#{medicalRegisterController.selectEditGroupRecord(record)}">
								<p:graphicImage value="/images/search.png" style="border:0px;" />
							</p:commandLink>
						</p:column>
						<p:column headerText="负责人">
							<h:outputText value="#{record.managerName}" />
						</p:column>
						<p:column headerText="车牌号">
							<h:outputText value="#{record.carnumber}" />
						</p:column>
						<p:column headerText="出发时间">
							<h:outputText value="#{record.leavetime}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm" timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column headerText="返回时间">
							<h:outputText value="#{record.backtime}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
							</h:outputText>
						</p:column>
						<p:column headerText="人数">
							<h:outputText value="#{record.counts}">
							</h:outputText>
						</p:column>
						<p:column headerText="人数">
							<p:commandButton update=":GroupHeadForm,:message"
								action="#{medicalRegisterController.sendMessage}"
								value="#{record.sended eq 1?'重新发送':'发送统计单'}">
								<f:setPropertyActionListener value="#{record}"
									target="#{medicalRegisterController.selectedGroup}" />
							</p:commandButton>
						</p:column>
					</p:dataTable>
				</h:panelGrid>

				<div align="center">
					<p:commandButton styleClass="addbtn" value=""
						action="#{medicalRegisterController.showAddNewGroupDlg}"
						oncomplete="toNewGroupRecordDialog.show()"
						update=":insertGroupForm,:groupForm" />
					<p:commandButton styleClass="deletebtn" value=""
						disabled="#{medicalRegisterController.disDeleteButton}"
						onclick="confirmDeleteGroupDialog.show()" type="button" />
					<p:commandButton styleClass="modifybtn" value=""
						disabled="#{medicalRegisterController.disDeleteButton}"
						action="#{medicalRegisterController.updatedGroupDlg}"
						oncomplete="toNewGroupRecordDialog.show()"
						update=":toNewGroupRecordForm,:message" />
					<p:commandButton styleClass="closebtn" value=""
						onclick="groupManageDialog.hide()" />
				</div>
			</h:form>
		</p:dialog>

		<p:dialog header="分组详情" widgetVar="olderInfoDialog" width="500"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="olderInfoForm">
				<b>#{medicalRegisterController.groupCollectionInfo}</b>
				<p:dataTable cellspacing="8" rows="5" style="width:100%"
					styleClass="alignTop" id="medicalRegisterTable" rowIndexVar="row"
					value="#{medicalRegisterController.oneGroupOlder}" var="record"
					rowKey="#{record.id}" emptyMessage="没有相应记录" paginator="true"
					paginatorPosition="bottom"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
					<p:column headerText="姓名" styleClass="width50">
						<h:outputText value="#{record.olderName}" />
					</p:column>

					<p:column headerText="就医类型" styleClass="width60">
						<h:outputText value="#{record.type}" />
					</p:column>

					<p:column headerText="预交金" styleClass="width50">
						<h:outputText value="#{record.advance}" />
					</p:column>
				</p:dataTable>
			</h:form>
		</p:dialog>

		<p:dialog header="新分组" widgetVar="toNewGroupRecordDialog"
			resizable="false" appendTo="@(body)" position="top" modal="true">
			<h:form id="toNewGroupRecordForm">
				<table class="hengbiaoge" width="100%" id="insertGroupTable">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="nameText">负责人姓名:</label></td>
						<td class="hengbiaogedata"><h:panelGroup>
								<p:inputText id="nameText"
									value="#{medicalRegisterController.insertedGroupRow.managerName}" />
								<his:IME for="toNewGroupRecordForm:nameText" fitcol="inputCode"
									resultcol="0" lock="true" rawSQL="true"
									SQL="#{medicalGroupManageController.employeeNameSql}"
									SQLResult="负责人:0,部门:1,输入码:2,负责人Id:3:hide"
									multiresult="toNewGroupRecordForm:managerIdHd;3" />
								<h:inputHidden id="managerIdHd"
									value="#{medicalRegisterController.insertedGroupRow.managerId}" />
							</h:panelGroup></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="carnumberText">车牌号:</label></td>
						<td class="hengbiaogedata"><p:inputText id="carnumberText"
								value="#{medicalRegisterController.insertedGroupRow.carnumber}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="leaveDate_input">出发日期:</label></td>
						<td class="hengbiaogedata"><p:calendar id="leaveDate"
								pattern="yyyy-MM-dd HH:mm" size="20"
								value="#{medicalRegisterController.insertedGroupRow.leavetime}"
								showButtonPanel="true" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="backDate_input">返还日期:</label></td>
						<td class="hengbiaogedata"><p:calendar id="backDate"
								pattern="yyyy-MM-dd HH:mm" size="20"
								value="#{medicalRegisterController.insertedGroupRow.backtime}"
								showButtonPanel="true" /></td>
					</tr>

				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						action="#{medicalRegisterController.addTONewGroupRecord}"
						onstart="return checkNulls('toNewGroupRecordForm','redfont',true);"
						oncomplete="addToNewGroupComplete(xhr, status, args)"
						update=":message,:dataTableForm,:toNewGroupRecordForm,:maintainForm,:GroupHeadForm" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="toNewGroupRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog header="添加到已有分组" widgetVar="addToGroupDialog"
			appendTo="@(body)" position="center"
			focus=":addToGroupForm:searchButton" modal="true">
			<h:form id="addToGroupForm">
				<h:panelGrid columns="15">
					<!-- 输入起始时间和截止时间 -->
					<h:outputText value="&nbsp;&nbsp;出发时间:" style="width:80" />
					<p:calendar id="startDate" pattern="yyyy-MM-dd" size="15"
						value="#{medicalRegisterController.startGroupDate}" />
					<h:outputText value="至:" style="width:80" />
					<p:calendar id="endDate" pattern="yyyy-MM-dd" size="15"
						value="#{medicalRegisterController.endGroupDate}" />
					<p:commandButton id="searchButton"
						action="#{medicalRegisterController.searchGroupRecords}"
						styleClass="searchbtn" value="" update=":addToGroupForm,:message" />
				</h:panelGrid>

				<h:panelGrid id="medicalGroupRecord" style="width:100%">
					<p:dataTable cellspacing="8" rows="10" style="width:100%"
						id="medicalRegisterTable" rowIndexVar="row"
						value="#{medicalRegisterController.grouRecords}" var="record"
						rowKey="#{record.id}" selectionMode="single" emptyMessage="没有相应记录"
						selection="#{medicalRegisterController.selectedGroup}"
						paginator="true" paginatorPosition="bottom"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
						dblClickSelect="true">
						<p:ajax event="rowDblselect"
							listener="#{medicalRegisterController.selectToAddRecords}"
							update=":message,:dataTableForm,:addToGroupForm,:maintainForm"
							oncomplete="handleaddToGroup(xhr, status, args)"></p:ajax>

						<p:ajax event="rowDblselect"
							listener="#{medicalRegisterController.selectToAddRecords}"
							update=":message,:dataTableForm,:addToGroupForm,:maintainForm"
							oncomplete="handleaddToGroup(xhr, status, args)"></p:ajax>

						<p:ajax event="rowSelect"
							listener="#{medicalRegisterController.selectEditGroupRecord}"
							update=":addToGroupForm" />

						<p:column headerText="负责人">
							<h:outputText value="#{record.managerName}" />
						</p:column>
						<p:column headerText="车牌号">
							<h:outputText value="#{record.carnumber}" />
						</p:column>
						<p:column headerText="出发时间">
							<h:outputText value="#{record.leavetime}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm" timeZone="GMT+8" />
							</h:outputText>
						</p:column>
						<p:column headerText="返回时间">
							<h:outputText value="#{record.backtime}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
							</h:outputText>
						</p:column>
						<p:column headerText="人数">
							<h:outputText value="#{record.counts}">

							</h:outputText>
						</p:column>
					</p:dataTable>
				</h:panelGrid>
				<b>#{medicalRegisterController.groupCollectionInfo}</b>
				<div align="center">
					<p:commandButton styleClass="commonbtn" value="加入"
						action="#{medicalRegisterController.addTOGroupRecord}"
						oncomplete="handleaddToGroup(xhr, status, args)"
						update=":message,:dataTableForm,:addToGroupForm,:maintainForm" />
					<p:commandButton styleClass="closebtn" value=""
						onclick="addToGroupDialog.hide()" />
				</div>
			</h:form>
		</p:dialog>



		<p:dialog header="新增" widgetVar="insertGroupRecordDialog"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="insertGroupForm">
				<table class="hengbiaoge" width="100%" id="insertGroupTable">
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel
								value="&nbsp;&nbsp;负责人姓名:" for="insertGroupForm:nameText"
								styleClass="redfont" /></td>
						<td class="hengbiaogedata"><h:panelGroup>
								<p:inputText id="nameText" style="width:120px" required="true"
									value="#{medicalGroupManageController.insertedRow.managerName}"
									requiredMessage="请输入负责人姓名!" />
								<his:IME for="insertGroupForm:nameText" fitcol="inputCode"
									resultcol="0" lock="true" rawSQL="true"
									SQL="#{medicalGroupManageController.employeeNameSql}"
									SQLResult="负责人:0,部门:1,输入码:2,负责人Id:3:hide"
									multiresult="insertGroupForm:managerIdHd;3" />
								<h:inputHidden id="managerIdHd"
									value="#{medicalGroupManageController.insertedRow.managerId}" />
							</h:panelGroup></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="车牌号:"
								for="carnumberText" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:inputText id="carnumberText"
								style="width:120px" required="true" requiredMessage="请输入车牌号!"
								value="#{medicalGroupManageController.insertedRow.carnumber}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="出发日期:"
								for="leaveDate" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:calendar id="leaveDate"
								pattern="yyyy-MM-dd" required="true" size="16"
								requiredMessage="请输入出发日期!"
								value="#{medicalGroupManageController.insertedRow.leavetime}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="返还日期:"
								for="backDate" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:calendar id="backDate"
								pattern="yyyy-MM-dd" required="true" size="16"
								requiredMessage="请输入返还日期!"
								value="#{medicalGroupManageController.insertedRow.backtime}" /></td>
					</tr>

				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						action="#{medicalGroupManageController.insertGroupRecord}"
						oncomplete="handleDialogComplete(xhr, status, args)"
						process="@this,insertGroupForm"
						update=":insertGroupForm,:groupForm,:message" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="insertGroupRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<p:confirmDialog modal="true" appendTo="@(body)"
			widgetVar="confirmDeleteGroupDialog" message="确定要删除此分组记录吗？">
			<h:form>
				<p:commandButton styleClass="commonbtn" value="确定"
					action="#{medicalRegisterController.deleteGroupRecord}"
					update=":GroupHeadForm,:message"
					oncomplete="confirmDeleteGroupDialog.hide();">
				</p:commandButton>
				<p:commandButton styleClass="commonbtn" value="取消" type="reset"
					onclick="confirmDeleteGroupDialog.hide();"></p:commandButton>
			</h:form>
		</p:confirmDialog>
		<p:dialog header="修改" widgetVar="updateGroupRecordDialog"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="updateGroupForm">
				<table class="hengbiaoge" width="100%" id="updateGroupTable">
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel
								value="&nbsp;&nbsp;负责人姓名:" for="updateGroupForm:nameText"
								styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:inputText id="nameText"
								style="width:120px" readonly="true"
								value="#{medicalGroupManageController.updatedRow.managerName}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="车牌号:"
								for="updateGroupForm:carnumberText" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:inputText id="carnumberText"
								style="width:120px" required="true" requiredMessage="车牌号不能为空!"
								value="#{medicalGroupManageController.updatedRow.carnumber}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="出发日期:"
								for="updateGroupForm:leaveDate" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:calendar id="leaveDate"
								pattern="yyyy-MM-dd" size="16" required="true"
								requiredMessage="出发日期不能为空!"
								value="#{medicalGroupManageController.updatedRow.leavetime}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="返还日期:"
								for="updateGroupForm:backDate" styleClass="redfont" /></td>
						<td class="hengbiaogedata"><p:calendar id="backDate"
								pattern="yyyy-MM-dd" size="16" required="true"
								requiredMessage="返还日期不能为空!"
								value="#{medicalGroupManageController.updatedRow.backtime}" /></td>
					</tr>

				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton styleClass="submitbtn" value=""
						action="#{medicalGroupManageController.updateGroupRecord}"
						oncomplete="handleDialogComplete(xhr, status, args)"
						process="@this,updateGroupForm"
						update=":updateGroupForm,:groupForm,:message" />
					<p:commandButton type="reset" styleClass="cancelbtn" value=""
						onclick="updateGroupRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog header="详细信息" widgetVar="detailRecordDialog"
			appendTo="@(body)" position="center" modal="true">
			<h:form id="detailGroupForm">
				<table class="hengbiaoge" width="100%" id="updateTable">
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="nameText">老人姓名:</label></td>
						<td class="hengbiaogedata"><h:outputText id="nameText"
								value="#{medicalRegisterController.updatedRow.olderName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="大厦:"
								for="buildingText" /></td>
						<td class="hengbiaogedata"><h:outputText id="buildingText"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.buildName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><h:outputLabel value="房间:"
								for="roomText" /></td>
						<td class="hengbiaogedata"><h:outputText id="roomText"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.roomName}" /></td>
						<td class="hengbiaogeHeader1"><h:outputLabel value="床位号:"
								for="bedNoText" /></td>
						<td class="hengbiaogedata"><h:outputText id="bedNoText"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.bedName}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalDate_input">就医日期:</label></td>
						<td class="hengbiaogedata"><h:outputText
								value="#{medicalRegisterController.updatedRow.hospitalizetime}">
								<f:convertDateTime pattern="yyyy-MM-dd" />
							</h:outputText></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalTypeText">就医类型:</label></td>
						<td class="hengbiaogedata"><h:outputText id="medicalTypeText"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.type}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="medicalIssueText">就医事项:</label></td>
						<td class="hengbiaogedata" colspan="3"><h:outputText
								id="medicalIssueText" style="width:120px"
								value="#{medicalRegisterController.updatedRow.hospitalizeissue}" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceText">预交金:</label></td>
						<td class="hengbiaogedata"><h:outputText id="advanceText"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.advance}">
							</h:outputText></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextfza">分组:</label></td>
						<td class="hengbiaogedata"><h:outputText id="advanceTextfza"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.groupId}" /></td>
					</tr>

					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextfhj">返还金:</label></td>
						<td class="hengbiaogedata"><h:outputText id="advanceTextfhj"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.backmoney}">
							</h:outputText></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextfy">是否返院登记:</label></td>
						<td class="hengbiaogedata"><h:outputText value="已登记"
								rendered="#{medicalRegisterController.updatedRow.isback == 1}" />
							<h:outputText value="未登记"
								rendered="#{medicalRegisterController.updatedRow.isback== null}" />
						</td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextjfw">交付物品:</label></td>
						<td class="hengbiaogedata" colspan="3"><h:outputText
								id="advanceTextjfw" style="width:120px"
								value="#{medicalRegisterController.updatedRow.things}" /></td>
					</tr>

					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextcfsj">出发时间:</label></td>
						<td class="hengbiaogedata"><h:outputText id="advanceTextcfsj"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.leaveTime}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
							</h:outputText></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextsj">返院时间:</label></td>
						<td class="hengbiaogedata"><h:outputText id="advanceTextsj"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.backtime}">
								<f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
							</h:outputText></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="advanceTextfzr">负责人:</label></td>
						<td class="hengbiaogedata"><h:outputText id="advanceTextfzrr"
								style="width:120px"
								value="#{medicalRegisterController.updatedRow.managerName}">
							</h:outputText></td>
						<td class="hengbiaogeHeader1"><label class="redfont"></label></td>
						<td class="hengbiaogedata">&nbsp;</td>
					</tr>
				</table>
				<div style="width: 100%; text-align: center;">
					<p:commandButton type="button" styleClass="commonbtn" value="关闭"
						onclick="detailRecordDialog.hide()">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>


		<script type="text/javascript">

	function handleaddToGroup(xhr, status, args){
		if( args.success) {
			addToGroupDialog.hide();
		}
	}
	
	function addToNewGroupComplete(xhr, status, args){
		if( args.success) {
			toNewGroupRecordDialog.hide();
		}
	}
	
		function handleDialogComplete(xhr, status, args){
			if(!args.validationFailed &amp;&amp; args.success) {
				updateRecordDialog.hide();
				groupRecordDialog.hide();
				insertGroupRecordDialog.hide();
				insertRecordDialog.hide();
				backedRegisterDialog.hide();
				groupRecordDialog.hide();
            }	
            
		}
		function handleUpdateDialogInit(xhr, status, args){
			if(!args.validationFailed &amp;&amp; args.success) {
				updateRecordDialog.show();
            }	
		}

		
		function handleDetail(xhr, status, args){
			if(args.success) {
				detailRecordDialog.show();
            }	
		}
		function handleBackRegisiterDialogInit(xhr, status, args){
			if(!args.validationFailed &amp;&amp; args.success) {
				backedRegisterDialog.show();
            }	
		}

		updateRecordDialog.show()
		//清空 selectForm
		function clearSelectForm(){
			document.getElementById("headForm:startDate").value="";
			document.getElementById("headForm:endDate").value="";
			document.getElementById("headForm:nameText").value="";
			document.getElementById("GroupHeadForm:startDate").value="";
			document.getElementById("GroupHeadForm:endDate").value="";
			document.getElementById("GroupHeadForm:nameText").value="";
			return true;
		}
		function  initGroupManageDialog(){
			groupManageDialog.show();
			document.getElementById("GroupHeadForm:nameText").value="";
		}
		
		function confirmDeleteDialogShow(xhr, status, args){
			if(args.show){
				confirmDeleteDialog.show();
			}
		}
		
		function toNewGroupRecordDialogShow(xhr, status, args){
			if(args.show){
				toNewGroupRecordDialog.show();
			}
		}
		
		function addToGroupDialogShow(xhr, status, args){
			if(args.show){
				addToGroupDialog.show();
			}
		}
		</script>
	</h:body>
</f:view>
</html>