<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:his="http://centling.his.net/histag"
	xmlns:p="http://primefaces.org/ui">

<!-- 回车键，往下！引入的js文件 -->
<f:view contentType="text/html">
		<h:head>
			<title>#{pageConfig.checkDrugPaper}</title>
			
			
			<link type="text/css" rel="stylesheet"
				href="#{request.contextPath}/css/default.css" />
			<link type="text/css" rel="stylesheet"
				href="#{request.contextPath}/css/skin.css" />
			<link type="text/css" rel="stylesheet"
				href="#{request.contextPath}/css/layout.css"></link>
			<link href="#{request.contextPath}/css/css.css" rel="stylesheet"
				type="text/css" />
			<link rel="stylesheet" href="#{request.contextPath}/css/style.css" ></link>

			<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
			
		    <script type="text/javascript"
			src="#{request.contextPath}/resources/js/ime.js?ver=#{projectConfig.ver}" />
		<h:outputScript library="javax.faces" name="jsf.js" target="head" />
		<script type="text/javascript" src="#{request.contextPath}/resources/js/calendar.js?ver=#{projectConfig.ver}" />
		</h:head>
		
		<h:body>
	<p:growl id="messages"></p:growl>

	<h:form id="searchForm">
		<!-- 输入起始时间和截止时间 -->
		<h:outputText value="呼叫时间:" style="width:80" />
		<p:calendar id="startDate" pattern="yyyy-MM-dd" size="15"
			value="#{ringRecordController.startDate}" />
		<h:outputText value="至:" style="width:80" />
		<p:calendar id="endDate" pattern="yyyy-MM-dd" size="15"
			value="#{ringRecordController.endDate}" />
		<h:outputLabel value="呼叫状态:" for="sendFlag" />
		<h:selectOneMenu value="#{ringRecordController.ringstatus}"
			id="ringstatus" class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker ui-state-hover">
			<f:selectItem itemLabel="所有" />
			<f:selectItem itemLabel="等待响应" itemValue="1" />
			<f:selectItem itemLabel="呼叫停止" itemValue="2" />
		</h:selectOneMenu>
		<p:commandButton id="searchButton"
			action="#{ringRecordController.search}" styleClass="searchbtn" value=""
			update=":listForm,:messages" />
		<p:commandButton styleClass="clearbtn" value="" 
				action="#{ringRecordController.clearSearchForm}"
			update=":searchForm,:messages">
		</p:commandButton>
		<h:inputHidden value="checkSearchDate" id="checkSearchDate" validator="#{ringRecordController.checkSearchDate}"/>
	</h:form>
	<h:form id="listForm">
				<p:dataTable rows="10" style="white-space:nowrap;width:100%"
					id="listTable" 
					value="#{ringRecordController.ringRecords}"
					var="ringRecord" rowKey="#{ringRecord.id}" selectionMode="single" emptyMessage="没有相应记录"
					selection="#{ringRecordController.selectRingRecord}"
					
					
					
					
					paginator="true" paginatorPosition="bottom"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
					<p:ajax event="rowSelect" listener="#{ringRecordController.onRingRecordSelect}" update=":messages"/>
					<p:ajax event="rowUnselect" listener="#{ringRecordController.onRingRecordUnselect}" update=":messages"/>
					<p:column headerText="房间" style="text-align:center;" >
						<h:outputText value="#{ringRecord.roomName}" />
					</p:column>
					<p:column headerText="呼叫时间" style="text-align:center;" >
						<h:outputText value="#{ringRecord.ringtime}" >
							<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"/>
						</h:outputText>
					</p:column>
					<p:column headerText="响应时间" style="text-align:center;" >
						<h:outputText value="#{ringRecord.responsetime}" >
							<f:convertDateTime pattern="yyyy-MM-dd HH:mm:ss"/>
						</h:outputText>
					</p:column>
					<p:column headerText="责任护理员" style="text-align:center;" >
						<h:outputText value="#{ringRecord.nurseName}" />
					</p:column>
					<p:column headerText="当前处理人" style="text-align:center;" >
						<h:outputText value="#{ringRecord.handlername}" />
					</p:column>
					<p:column headerText="呼叫器状态" style="text-align:center;" >
						<h:outputText value="等待响应" rendered="#{ringRecord.ringstatus == 1}" />
						<h:outputText value="呼叫停止" rendered="#{ringRecord.ringstatus == 2}" />
					</p:column>
				</p:dataTable>
		</h:form>
		
		
	<script type="text/javascript">

	</script>
	</h:body>
</f:view>
</html>