<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:his="http://centling.his.net/histag"
	xmlns:p="http://primefaces.org/ui">
<f:view contentType="text/html">

	<style>
.ui-panel .ui-panel-content {
	padding: 0em !important;
}
</style>

	<h:head>
		<title>#{pageConfig.staffSchedule}</title>


		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/default.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/skin.css" />
		<link type="text/css" rel="stylesheet"
			href="#{request.contextPath}/css/layout.css"></link>
		<link href="#{request.contextPath}/css/css.css" rel="stylesheet"
			type="text/css" />
		<link rel="stylesheet" href="#{request.contextPath}/css/style.css"></link>

		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/ime.js?ver=#{projectConfig.ver}" />
		<h:outputScript library="javax.faces" name="jsf.js" target="head" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/common.js?ver=#{projectConfig.ver}" />
		<script type="text/javascript"
			src="#{request.contextPath}/resources/js/calendar.js?ver=#{projectConfig.ver}" />
	</h:head>
	<script type="text/javascript">
		function afterSave(xhr, status, args) {
			if (args.validate) {
				addDig.hide();
			}
		}
		function afterModifyArrange(xhr, status, args) {
			if (args.validate) {
				modifyDig.hide();
			}
		}
		function afterCheckSelectData(xhr, status, args) {
			if (args.validate) {
				modifyDig.show();
			}
		}
		function afterCheckDeleteData(xhr, status, args) {
			if (args.validate) {
				deleteConfirm.show();
			}
		}
		function afterCheckCopyData(xhr, status, args) {
			if (args.validate) {
				copyDig.show();
			}
		}
		function afterSaveCopyArranges(xhr, status, args) {
			if (args.validate) {
				copyDig.hide();
			}
		}
		function afterSaveCreatArranges(xhr, status, args) {
			if (args.validate) {
				creatDig.hide();
			}
		}
		function afterCheckSynchronizeData(xhr, status, args) {
			if (args.validate) {
				synchronizeDig.show();
			}
		}
		function afterSaveSynchronizeArranges(xhr, status, args) {
			if (args.validate) {
				synchronizeDig.hide();
			}
		}
		function clearSearchForm() {
			jQuery("#searchForm\\:startDate").val("");
			jQuery("#searchForm\\:endDate").val("");
		}
	</script>


	<h:body>
		<p:growl id="message" widgetVar="message"></p:growl>
		<p:growl id="messages"></p:growl>
		<h:form id="searchForm" style="display: inline">
			<h:panelGrid columns="13">
				<h:outputText value="开始日期:" style="text-align:right" />
				<p:calendar id="startDate" pattern="yyyy-MM-dd"
					value="#{staffScheduleController.startDate}" />
				<h:outputText value="结束日期:" style="text-align:right" />
				<p:calendar id="endDate" pattern="yyyy-MM-dd"
					value="#{staffScheduleController.endDate}" />
				<h:outputText value="部门名称" />
				<h:inputHidden value="#{staffScheduleController.deptId}" id="deptId" />
				<p:inputText value="#{staffScheduleController.deptName}"
					id="deptName">
					<p:ajax event="blur" process="@this,deptId"
						listener="#{staffScheduleController.onChangeSelectDeptId}"
						update=":searchForm:empPanel,:messages" />
				</p:inputText>
				<his:IME for="searchForm:deptName" fitcol="id,inputCode"
					resultcol="1" lock="true" rawSQL="true"
					SQL="#{staffScheduleController.selectDeptSql}"
					SQLResult="编号:0:hide,部门名称:1,输入码:2:hide"
					multiresult="searchForm:deptId;0,searchForm:deptName;1" />
				<h:outputText value="员工姓名" />
				<p:panel id="empPanel"
					style="border: 0px;height: 29px;width: 150px;padding: 0px 0px 0px 0px">
					<h:inputHidden value="#{staffScheduleController.empId}" id="empId" />
					<p:inputText value="#{staffScheduleController.empName}"
						id="empName" />
					<his:IME for="searchForm:empName" fitcol="id,inputCode"
						resultcol="1" lock="true" rawSQL="true"
						SQL="#{staffScheduleController.selectEmpSql}"
						SQLResult="编号:0:hide,姓名:1,输入码:2:hide"
						multiresult="searchForm:empId;0,searchForm:empName;1" />
				</p:panel>
				<p:commandButton styleClass="searchbtn" value=""
					action="#{staffScheduleController.search}"
					update=":scheduleListForm,:messages">
				</p:commandButton>
				<p:commandButton styleClass="commonbtn" value="清空"
					action="#{staffScheduleController.clearSearchForm}"
					update=":searchForm,:messages">
				</p:commandButton>
			</h:panelGrid>
		</h:form>

		<h:form id="scheduleListForm">
			<p:dataTable id="scheduleList"
				value="#{staffScheduleController.arranges}" var="arrange"
				rowKey="#{arrange.id}" emptyMessage="当前无内容"
				selection="#{staffScheduleController.selectArranges}" rows="10"
				paginatorAlwaysVisible="false" paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
				paginator="true">
				<p:column selectionMode="multiple" style="text-align:center"></p:column>
				<p:column headerText="部门名称" style="text-align:center">
					<h:outputText value="#{arrange.departName}" />
				</p:column>
				<p:column headerText="员工姓名" style="text-align:center">
					<h:outputText value="#{arrange.employeeName}" />
				</p:column>
				<p:column headerText="值班日期" style="text-align:center">
					<h:outputText value="#{arrange.arrangeTime}">
						<f:convertDateTime pattern="yyyy-MM-dd" />
					</h:outputText>
				</p:column>
				<p:column headerText="值班时段" style="text-align:center">
					<h:outputText value="#{arrange.arrangeName}" />
				</p:column>
				<p:column headerText="开始时间" style="text-align:center">
					<h:outputText value="#{arrange.startTime}">
						<f:convertDateTime pattern="HH:mm:ss" />
					</h:outputText>
				</p:column>
				<p:column headerText="结束时间" style="text-align:center">
					<h:outputText value="#{arrange.endTime}">
						<f:convertDateTime pattern="HH:mm:ss" />
					</h:outputText>
				</p:column>
				<p:column headerText="备注" style="text-align:center">
					<h:outputText value="#{arrange.note}">
					</h:outputText>
				</p:column>
			</p:dataTable>
			<div align="center">
				<p:commandButton value="新增" styleClass="commonbtn" ajax="true"
					process="@this" action="#{staffScheduleController.add}"
					oncomplete="addDig.show()"
					update=":addForm,:addArrangeForm,:messages">
				</p:commandButton>
				<p:commandButton value="创建排班" styleClass="commonbtn"
					action="#{staffScheduleController.initCreat}"
					oncomplete="creatDig.show()" update=":creatForm,:messages">
				</p:commandButton>
				<p:commandButton value="复制" styleClass="commonbtn" ajax="true"
					process="@this,scheduleListForm:scheduleList"
					action="#{staffScheduleController.checkMultipleSelectDate}"
					oncomplete="afterCheckCopyData(xhr,status,args)"
					update=":copyForm,:messages">
				</p:commandButton>
				<p:commandButton value="创建至模板" styleClass="commonbtn" ajax="true"
					process="@this,scheduleListForm:scheduleList"
					action="#{staffScheduleController.checkDeptList}"
					oncomplete="afterCheckSynchronizeData(xhr,status,args)"
					update=":synchronizeForm,:messages">
				</p:commandButton>
				<p:commandButton value="修改" styleClass="commonbtn" ajax="true"
					process="@this,scheduleListForm:scheduleList"
					action="#{staffScheduleController.checkSingleSelectData}"
					oncomplete="afterCheckSelectData(xhr,status,args)"
					update=":modifyForm,:messages">
				</p:commandButton>
				<p:commandButton value="删除" styleClass="commonbtn" ajax="true"
					process="@this,scheduleListForm:scheduleList"
					action="#{staffScheduleController.checkSingleDeleteData}"
					oncomplete="afterCheckDeleteData(xhr,status,args)"
					update=":messages">
				</p:commandButton>
			</div>
		</h:form>
		<p:dialog widgetVar="creatDig" appendTo="@(body)" resizable="true"
			header="创建人员值班记录" modal="true" position="top">
			<h:form id="creatForm">
				<table>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="tempName">模板名称</label></td>
						<td class="hengbiaogedata"><p:inputText id="tempName"
								value="#{staffScheduleController.templateName}">
								<p:ajax event="blur"
									listener="#{staffScheduleController.selectScheduleList}"
									update=":creatForm:scheduleList,:messages"
									process="@this,creatForm:tempId"></p:ajax>
							</p:inputText> <his:IME for="creatForm:tempName"
								fitcol="id,template_name,dept_name" resultcol="1" lock="true"
								rawSQL="true"
								SQL="select p.id,p.template_name,p.dept_name from pension_arrange_template p where p.cleared=2 "
								SQLResult="编号:0:hide,模板名称:1,部门名称:2"
								multiresult="creatForm:tempId;0" /> <h:inputHidden id="tempId"
								value="#{staffScheduleController.templateId}"></h:inputHidden></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="creatStartDate_input">起始日期</label></td>
						<td class="hengbiaogedata"><p:calendar pattern="yyyy-MM-dd"
								value="#{staffScheduleController.creatStartDate}"
								id="creatStartDate">
							</p:calendar></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="creatEndDate_input">结束日期</label></td>
						<td class="hengbiaogedata"><p:calendar pattern="yyyy-MM-dd"
								value="#{staffScheduleController.creatEndDate}"
								id="creatEndDate">
							</p:calendar></td>

					</tr>
				</table>
				<p:dataTable id="scheduleList"
					value="#{staffScheduleController.arrangeTemplateDetails}"
					var="detail" rowKey="#{detail.id}" emptyMessage="当前无内容"
					selection="#{staffScheduleController.selectTemplateDetail}"
					rows="6" paginatorAlwaysVisible="fasle" paginatorPosition="bottom"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
					paginator="true">
					<p:ajax event="rowSelect"
						listener="#{scheduleTemplateController.setEnableFlag}"
						update=":messages" />
					<p:ajax event="rowUnselect"
						listener="#{scheduleTemplateController.setUnableFlag}"
						update=":messages" />
					<p:ajax event="rowSelectCheckbox"
						listener="#{medicalRegisterController.setEnableFlag}"
						update=":messages" />
					<p:ajax event="rowUnselectCheckbox"
						listener="#{medicalRegisterController.setUnableFlag}"
						update=":messages" />

					<p:column selectionMode="multiple" width="30">
					</p:column>

					<p:column headerText="部门名称" style="text-align:center">
						<h:outputText value="#{detail.departName}" />
					</p:column>
					<p:column headerText="员工姓名" style="text-align:center">
						<h:outputText value="#{detail.employeeName}" />
					</p:column>
					<p:column headerText="值班时段" style="text-align:center">
						<h:outputText value="#{detail.arrangeName}" />
					</p:column>
					<p:column headerText="开始时间" style="text-align:center">
						<h:outputText value="#{detail.startTime}">
							<f:convertDateTime pattern="HH:mm:ss" />
						</h:outputText>
					</p:column>
					<p:column headerText="结束时间" style="text-align:center">
						<h:outputText value="#{detail.endTime}">
							<f:convertDateTime pattern="HH:mm:ss" />
						</h:outputText>
					</p:column>
					<p:column headerText="备注" style="text-align:center">
						<h:outputText value="#{detail.note}">
						</h:outputText>
					</p:column>
				</p:dataTable>
				<div align="center">
					<p:commandButton styleClass="submitbtn" value="" ajax="true"
						onstart="return checkNulls('creatForm','redfont',true);"
						process="@this,creatForm"
						action="#{staffScheduleController.saveCreatArranges}"
						oncomplete="afterSaveCreatArranges(xhr,status,args)"
						update=":scheduleListForm:scheduleList,:messages"></p:commandButton>
					<p:commandButton styleClass="closebtn" value="" type="button"
						onclick="creatDig.hide()"></p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<p:confirmDialog message="是否确认删除该人员排班记录？" severity="alert"
			widgetVar="deleteConfirm" appendTo="@(body)">
			<h:form>
				<p:commandButton styleClass="submitbtn" value=""
					style="margin-left:80px;"
					actionListener="#{staffScheduleController.delete}"
					update=":scheduleListForm:scheduleList,:messages" ajax="true"
					oncomplete="deleteConfirm.hide()" />
				<p:commandButton styleClass="cancelbtn" value=""
					onclick="deleteConfirm.hide()" type="button" />
			</h:form>
		</p:confirmDialog>
		<p:dialog widgetVar="synchronizeDig" width="300px" height="100px"
			appendTo="@(body)" resizable="true" header="创建至模板" modal="true">
			<h:form id="synchronizeForm">
				<table>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="tempName">模板名称</label></td>
						<td class="hengbiaogedata"><p:inputText
								value="#{staffScheduleController.template.templateName}"
								id="tempName" required="true" requiredMessage="请填写模板名称！"></p:inputText>
						</td>
					</tr>
				</table>
				<h:panelGrid id="buttonGrid" columns="3" style="margin:0px auto">
					<p:commandButton styleClass="submitbtn" value="" ajax="true"
						process="@this,synchronizeForm"
						action="#{staffScheduleController.saveSynchronizeArranges}"
						oncomplete="afterSaveSynchronizeArranges(xhr,status,args)"
						update=":messages"></p:commandButton>
					<p:commandButton styleClass="closebtn" value="" type="button"
						onclick="synchronizeDig.hide()"></p:commandButton>
				</h:panelGrid>
			</h:form>
		</p:dialog>
		<p:dialog widgetVar="copyDig" width="540px" height="150px"
			focus=":copyForm:copyStartDate" appendTo="@(body)" resizable="true"
			header="复制人员值班记录" modal="true">
			<h:form id="copyForm">
				<table>
					<tr>
						<td class="hengbiaogeHeader1">复制</td>
						<td class="hengbiaogeHeader1">起始日期</td>
						<td class="hengbiaogedata"><h:inputText
								class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker"
								value="#{staffScheduleController.originStartDate}"
								readonly="true">
								<f:convertDateTime pattern="yyyy-MM-dd"></f:convertDateTime>
							</h:inputText></td>
						<td class="hengbiaogeHeader1">结束日期</td>
						<td class="hengbiaogedata"><h:inputText
								value="#{staffScheduleController.originEndDate}" readonly="true"
								class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker">
								<f:convertDateTime pattern="yyyy-MM-dd"></f:convertDateTime>
							</h:inputText></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1">至</td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="copyForm:copyStartDate">起始日期</label></td>
						<td class="hengbiaogedata"><p:calendar id="copyStartDate"
								pattern="yyyy-MM-dd"
								value="#{staffScheduleController.copyStartDate}" required="true"
								requiredMessage="请填写复制排班起始时间！">
								<p:ajax event="dateSelect"
									process="@this,copyForm:copyStartDate"
									listener="#{staffScheduleController.culCopyEndDate}"
									update=":copyForm:copyEndDate,:messages"
									oncomplete="jumpTo('copyForm:copyStartDate')"></p:ajax>
							</p:calendar></td>
						<td class="hengbiaogeHeader1">结束日期</td>
						<td class="hengbiaogedata"><h:inputText
								class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker"
								value="#{staffScheduleController.copyEndDate}" id="copyEndDate"
								readonly="true">
								<f:convertDateTime pattern="yyyy-MM-dd"></f:convertDateTime>
							</h:inputText></td>
					</tr>
				</table>
				<div align="center">
					<p:commandButton styleClass="submitbtn" value="" ajax="true"
						process="@this"
						action="#{staffScheduleController.saveCopyArranges}"
						oncomplete="afterSaveCopyArranges(xhr,status,args)"
						update=":scheduleListForm:scheduleList,:messages"></p:commandButton>
					<p:commandButton styleClass="closebtn" value="" type="button"
						onclick="copyDig.hide()"></p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		<p:dialog widgetVar="addDig" width="930px" height="450px"
			appendTo="@(body)" resizable="true" header="新增人员值班记录" modal="true">
			<h:form id="addForm">
				<table>
					<tr>
						<td class="hengbiaogeHeader1"><label for="addDeptName">部门名称</label></td>
						<td class="hengbiaogedata"><h:inputHidden
								value="#{staffScheduleController.addDeptId}" id="addDeptId" />
							<p:inputText value="#{staffScheduleController.addDeptName}"
								id="addDeptName">
								<p:ajax event="blur" process="@this,addDeptId,addDeptName"
									listener="#{staffScheduleController.onChangeAddDeptId}"
									update=":addForm:addEmpPanel,:messages" />
							</p:inputText> <his:IME for="addForm:addDeptName" fitcol="id,inputCode"
								resultcol="1" lock="true" rawSQL="true"
								SQL="#{staffScheduleController.selectDeptSql}"
								SQLResult="编号:0:hide,部门名称:1,输入码:2:hide"
								multiresult="addForm:addDeptId;0,addForm:addDeptName;1" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addEmpName">员工姓名</label></td>
						<td class="hengbiaogedata"><p:panel id="addEmpPanel"
								style="border: 0px;height: 29px;width: 150px;padding: 0px 0px 0px 0px">
								<h:inputHidden value="#{staffScheduleController.addEmpId}"
									id="addEmpId" />
								<h:inputHidden value="#{staffScheduleController.addEmpDeptId}"
									id="addEmpDeptId" />
								<h:inputHidden value="#{staffScheduleController.addEmpDeptName}"
									id="addEmpDeptName" />
								<p:inputText value="#{staffScheduleController.addEmpName}"
									id="addEmpName"></p:inputText>
								<his:IME for="addForm:addEmpName" fitcol="id,inputCode"
									resultcol="1" lock="true" rawSQL="true"
									SQL="#{staffScheduleController.addEmpSql}"
									SQLResult="编号:0:hide,部门名称:1,输入码:2:hide,部门编号:3:hide,部门名称:4:hide"
									multiresult="addForm:addEmpId;0,addForm:addEmpName;1,addForm:addEmpDeptId;3,addForm:addEmpDeptName;4" />
							</p:panel></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addArrangeTime_input">值班日期</label></td>
						<td class="hengbiaogedata"><p:calendar pattern="yyyy-MM-dd"
								id="addArrangeTime"
								value="#{staffScheduleController.addArrangeTime}" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="addArrangeName">值班时段</label></td>
						<td class="hengbiaogedata"><h:inputHidden
								value="#{staffScheduleController.addArrangeId}"
								id="addArrangeId" /> <h:inputHidden
								value="#{staffScheduleController.addStartTime}"
								id="addStartTime">
							</h:inputHidden> <h:inputHidden value="#{staffScheduleController.addEndTime}"
								id="addEndTime">
							</h:inputHidden> <p:inputText value="#{staffScheduleController.addArrangeName}"
								id="addArrangeName"></p:inputText> <his:IME
								for="addForm:addArrangeName" fitcol="id,input_code"
								resultcol="1" lock="true" rawSQL="true"
								SQL="#{staffScheduleController.addArrageSql}"
								SQLResult="编号:0:hide,班次名称:1,输入码:2:hide,起始时间:3,结束时间:4,是否跨天:5"
								multiresult="addForm:addArrangeId;0,addForm:addArrangeName;1,addForm:addStartTime;3,addForm:addEndTime;4" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label for="addNote">备注</label></td>
						<td class="hengbiaogedata" colspan="6"><h:inputText
								style="width:655px"
								class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker"
								id="addNote" value="#{staffScheduleController.addNote}"></h:inputText></td>
						<td class="hengbiaogedata"><p:commandButton value="新增"
								styleClass="commonbtn" ajax="true"
								process="@this,addDeptId,addDeptName,addArrangeTime,addEmpId,addEmpDeptId,addEmpDeptName,addEmpName,addArrangeId,addStartTime,addEndTime,addArrangeName,addNote"
								onstart="return checkNulls('addForm','redfont',true);"
								action="#{staffScheduleController.addArrange}"
								update=":addForm,:addArrangeForm,:messages">
							</p:commandButton></td>
					</tr>
				</table>
			</h:form>
			<h:form id="addArrangeForm">
				<p:dataTable id="addArrangeList"
					value="#{staffScheduleController.addArranges}" var="addArrange"
					rowKey="#{addArrange.id}" emptyMessage="当前无内容"
					selection="#{staffScheduleController.selectAddArrange}" rows="10"
					paginatorAlwaysVisible="false" paginatorPosition="bottom"
					paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
					paginator="true" selectionMode="single">
					<p:ajax event="rowSelect"
						listener="#{staffScheduleController.setEnableFlag}" />
					<p:ajax event="rowUnselect"
						listener="#{staffScheduleController.setUnableFlag}" />

					<p:column headerText="部门名称" style="text-align:center">
						<h:outputText value="#{addArrange.departName}" />
					</p:column>
					<p:column headerText="员工姓名" style="text-align:center">
						<h:outputText value="#{addArrange.employeeName}" />
					</p:column>
					<p:column headerText="值班日期" style="text-align:center">
						<h:outputText value="#{addArrange.arrangeTime}">
							<f:convertDateTime pattern="yyyy-MM-dd" />
						</h:outputText>
					</p:column>
					<p:column headerText="值班时段" style="text-align:center">
						<h:outputText value="#{addArrange.arrangeName}" />
					</p:column>
					<p:column headerText="开始时间" style="text-align:center">
						<h:outputText value="#{addArrange.startTime}">
							<f:convertDateTime pattern="HH:mm:ss" />
						</h:outputText>
					</p:column>
					<p:column headerText="结束时间" style="text-align:center">
						<h:outputText value="#{addArrange.endTime}">
							<f:convertDateTime pattern="HH:mm:ss" />
						</h:outputText>
					</p:column>
					<p:column headerText="备注" style="text-align:center">
						<h:outputText value="#{addArrange.note}">
						</h:outputText>
					</p:column>
				</p:dataTable>
				<h:panelGrid id="buttonGrid" columns="4" style="margin:0px auto">
					<p:commandButton styleClass="submitbtn" value="" ajax="true"
						process="@this" action="#{staffScheduleController.saveArranges}"
						oncomplete="afterSave(xhr,status,args)"
						update=":scheduleListForm,:messages"></p:commandButton>
					<p:commandButton styleClass="commonbtn" value="删除" ajax="true"
						process="@this"
						action="#{staffScheduleController.deleteAddArrange}"
						update=":addArrangeForm,:messages"></p:commandButton>
					<p:commandButton styleClass="commonbtn" value="关闭" type="button"
						onclick="addDig.hide()"></p:commandButton>

				</h:panelGrid>
			</h:form>
		</p:dialog>
		<p:dialog widgetVar="modifyDig" width="500px" height="150px"
			appendTo="@(body)" resizable="true" header="修改人员值班记录" modal="true">
			<h:form id="modifyForm">
				<table>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="modifyDeptName">部门名称</label></td>
						<td class="hengbiaogedata"><p:inputText
								value="#{staffScheduleController.modifyArrange.departName}"
								id="modifyDeptName" readonly="true" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="modifyEmpName">员工姓名</label></td>
						<td class="hengbiaogedata"><p:inputText
								value="#{staffScheduleController.modifyArrange.employeeName}"
								id="modifyEmpName" readonly="true"></p:inputText></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="modifyArrangeTime_input">值班日期</label></td>
						<td class="hengbiaogedata"><p:calendar pattern="yyyy-MM-dd"
								id="modifyArrangeTime"
								value="#{staffScheduleController.modifyArrange.arrangeTime}" /></td>
						<td class="hengbiaogeHeader1"><label class="redfont"
							for="modifyArrangeName">值班时段</label></td>
						<td class="hengbiaogedata"><h:inputHidden
								value="#{staffScheduleController.modifyArrange.arrangeId}"
								id="modifyArrangeId" /> <h:inputHidden
								value="#{staffScheduleController.modifyStartTime}"
								id="modifyStartTime" /> <h:inputHidden
								value="#{staffScheduleController.modifyEndTime}"
								id="modifyEndTime" /> <p:inputText
								value="#{staffScheduleController.modifyArrange.arrangeName}"
								id="modifyArrangeName"></p:inputText> <his:IME
								for="modifyForm:modifyArrangeName" fitcol="id,input_code"
								resultcol="1" lock="true" rawSQL="true"
								SQL="#{staffScheduleController.addArrageSql}"
								SQLResult="编号:0:hide,班次名称:1,输入码:2:hide,起始时间:3,结束时间:4,是否跨天:5"
								multiresult="modifyForm:modifyArrangeId;0,modifyForm:modifyArrangeName;1,modifyForm:modifyStartTime;3,modifyForm:modifyEndTime;4" /></td>
					</tr>
					<tr>
						<td class="hengbiaogeHeader1"><label for="modifyNote">备注</label></td>
						<td class="hengbiaogedata"><h:inputText
								class="ui-inputfield ui-widget ui-state-default ui-corner-all hasDatepicker"
								id="modifyNote"
								value="#{staffScheduleController.modifyArrange.note}"></h:inputText></td>
						<td class="hengbiaogeHeader1"><label for="addNote">操作员</label></td>
						<td class="hengbiaogedata"><p:inputText
								value="#{staffScheduleController.employee.name}" readonly="true" /></td>
					</tr>
				</table>
				<div align="center">
					<p:commandButton value="保存" styleClass="commonbtn" ajax="true"
						process="@this,modifyArrangeTime,modifyArrangeId,modifyStartTime,modifyEndTime,modifyArrangeName,modifyNote"
						onstart="return checkNulls('modifyForm','redfont',true);"
						action="#{staffScheduleController.modifyArrange}"
						oncomplete="afterModifyArrange(xhr,status,args)"
						update=":scheduleListForm,:messages">
					</p:commandButton>
					<p:commandButton styleClass="closebtn" value="" type="button"
						onclick="modifyDig.hide()"></p:commandButton>
				</div>
			</h:form>
		</p:dialog>


	</h:body>
</f:view>

</html>